module.exports=[35970,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(77156),e=a.i(70106);let f=(0,e.default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var g=a.i(33508);let h=(0,e.default)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);var i=a.i(67453),j=a.i(33441),k=a.i(4650),k=k;let l=(0,e.default)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),m=(0,e.default)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var n=a.i(50944),o=a.i(2639),p=a.i(47421),q=a.i(46611);let r=(0,a.i(19721).default)(async()=>{},{loadableGenerated:{modules:[51396]},ssr:!1}),s=({children:a,className:c="",variant:d="default",size:e="default",onClick:f,disabled:g,...h})=>{let i="inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50";return(0,b.jsx)("button",{className:`${i} ${i} ${{default:"bg-blue-600 text-white hover:bg-blue-700",outline:"border border-gray-300 bg-white hover:bg-gray-50",ghost:"hover:bg-gray-100",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300"}[d]} ${{default:"h-10 px-4 py-2",lg:"h-12 px-8 text-lg",sm:"h-9 px-3 text-sm",icon:"h-10 w-10"}[e]} ${c}`,onClick:f,disabled:g,...h,children:a})},t=({className:a="",...c})=>(0,b.jsx)("input",{className:`flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${a}`,...c}),u=({children:a,className:c=""})=>(0,b.jsx)("div",{className:`rounded-lg border bg-white shadow-sm ${c}`,children:a}),v=({children:a,className:c=""})=>(0,b.jsx)("div",{className:`p-6 pt-0 ${c}`,children:a}),w=({children:a,className:c="",variant:d="default"})=>{let e={default:"bg-gray-100 text-gray-800",secondary:"bg-blue-100 text-blue-800"};return(0,b.jsx)("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold ${e[d]||e.default} ${c}`,children:a})},x=({message:a,type:d="success",onClose:e})=>(c.useEffect(()=>{let a=setTimeout(e,4e3);return()=>clearTimeout(a)},[e]),(0,b.jsxs)("div",{className:`fixed bottom-8 left-1/2 -translate-x-1/2 z-50 px-6 py-4 rounded-lg shadow-2xl text-white font-medium flex items-center gap-3 animate-in slide-in-from-bottom-3 ${"success"===d?"bg-green-600":"bg-red-600"}`,children:["success"===d?(0,b.jsx)(i.CheckCircle2,{className:"h-5 w-5"}):(0,b.jsx)(g.X,{className:"h-5 w-5"}),a]})),y=({onClick:a,size:c="default",loading:d=!1})=>{let e="sm"===c;return(0,b.jsx)(s,{onClick:a,disabled:d,variant:"default",size:e?"sm":"default",className:`
        bg-purple-600 hover:bg-purple-700 text-white font-semibold shadow-lg
        ${e?"px-3":"px-6"}
        transition-all duration-200 group
      `,children:d?(0,b.jsx)(k.default,{className:"h-4 w-4 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("svg",{className:`h-5 w-5 ${e?"":"mr-2"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,b.jsx)("span",{className:`${e?"hidden sm:inline":" Customize Landing Page"} font-medium`})]})})};function z(){let[a,e]=c.useState(!0),[z,A]=c.useState([]),[B,C]=c.useState(null),[D,E]=c.useState(!1),[F,G]=c.useState(""),[H,I]=c.useState(null),[J,K]=c.useState(!1),[L,M]=c.useState("list"),[N,O]=c.useState(!1),[P,Q]=c.useState(null),[R,S]=c.useState(!1),[T,U]=c.useState("Landing Page"),{templateId:V,userId:W,setTemplate:X}=(0,q.usePageStore)();(0,n.useRouter)();let[Y,Z]=c.useState(null),$=(a,b="success")=>{Z({message:a,type:b})},_=a=>a.map(a=>({id:parseInt(a.id,10),userId:null===a.userId?null:parseInt(a.userId,10),name:a.name,url:a.url,views:parseInt(a.views||"0",10),conversions:parseInt(a.conversions||"0",10),status:a.status,lastModified:a.lastModified||a.updatedAt,template:a.template,isActive:"1"===a.isActive||!0===a.isActive}));c.useEffect(()=>{(async()=>{try{e(!0);let a=(await o.default.get("/Templates/list?userId=1")).data;Array.isArray(a)||(a=a.pages||a.data||[]);let b=_(a);A(b);let c=b.find(a=>a.isActive)||null;C(c)}catch(a){console.error("Failed to fetch landing pages:",a),$("Failed to load pages","error")}finally{e(!1)}})()},[]);let aa=z.filter(a=>{let b=null===a.userId,c=1===a.userId,d=!a.isActive;return(b||c)&&d}),ab=async a=>{Q(a.id);try{let b=await o.default.post("/templates/activate",{userId:Number(1),templateId:Number(a.id)}),c=b.data.templates||b.data,d=b.data.activePage,e=_(c);A(e),C(d),$(`"${a.name}" is now live!`,"success")}catch(a){console.error("Failed to activate page",a),$(a.response?.data?.message||"Failed to activate page","error")}finally{Q(null)}},ac=async()=>{if(B){S(!0);try{await o.default.post("/templates/deactivate",{userId:1,templateId:B.id});let a=z.map(a=>({...a,isActive:!1}));A(a),C(null),$("Landing page deactivated successfully","success")}catch(a){console.error("Failed to deactivate",a),$("Failed to deactivate page","error")}finally{S(!1)}}},ad=a=>{X(a.id,a.userId),U(a.name),O(!0)};return a?(0,b.jsx)(p.DashboardLayout,{children:(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(k.default,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{children:"Loading your landing pages..."})]})})}):(0,b.jsx)(p.DashboardLayout,{children:(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 relative",children:[(0,b.jsx)("div",{className:"bg-white border-b",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,b.jsx)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Landing Pages"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage and publish your product landing pages"})]})})})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[B&&(0,b.jsxs)("div",{className:"mb-12",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Active Landing Page"}),(0,b.jsxs)(w,{className:"bg-green-100 text-green-800",children:[(0,b.jsx)(j.Check,{className:"h-3 w-3 mr-1"}),"Live"]})]})}),(0,b.jsx)(u,{className:"overflow-hidden border-2 border-green-500 shadow-lg",children:(0,b.jsxs)("div",{className:"md:flex",children:[(0,b.jsx)("div",{className:"bg-gray-100 p-8",children:(0,b.jsx)("div",{className:"aspect-[5/7] w-40 relative rounded-lg overflow-hidden bg-white shadow-xl",children:(0,b.jsx)("img",{src:B.url,alt:B.name,className:"w-full h-full object-cover"})})}),(0,b.jsxs)("div",{className:"p-8 flex-1",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold mb-4",children:B.name}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-6 mb-8",children:[(0,b.jsxs)("div",{className:"bg-blue-50 p-5 rounded-xl text-center",children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:B.views.toLocaleString()}),(0,b.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Total Views"})]}),(0,b.jsxs)("div",{className:"bg-green-50 p-5 rounded-xl text-center",children:[(0,b.jsx)("div",{className:"text-3xl font-bold text-green-600",children:B.conversions}),(0,b.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Conversions"})]}),(0,b.jsxs)("div",{className:"bg-purple-50 p-5 rounded-xl text-center",children:[(0,b.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:[B.views>0?(B.conversions/B.views*100).toFixed(1):"0","%"]}),(0,b.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:"Conversion Rate"})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,b.jsx)(y,{onClick:()=>ad(B)}),(0,b.jsxs)(s,{variant:"outline",onClick:()=>(I(B),void(G(`https://yourdomain.com/preview/${B.id}`),E(!0),K(!1))),children:[(0,b.jsx)(h,{className:"h-4 w-4 mr-2"})," Share Link"]}),(0,b.jsx)(s,{variant:"outline",className:"text-red-600 border-red-300",onClick:ac,disabled:R,children:R?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.default,{className:"h-4 w-4 mr-2 animate-spin"}),"Deactivating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.X,{className:"h-4 w-4 mr-2"}),"Deactivate"]})})]})]})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:B?"Switch to Another Template":"Choose a Template to Activate"}),(0,b.jsxs)("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[(0,b.jsxs)("button",{onClick:()=>M("list"),className:`flex items-center gap-2 px-3 py-2 rounded-md transition-all ${"list"===L?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[(0,b.jsx)(l,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm font-medium hidden sm:inline",children:"List"})]}),(0,b.jsxs)("button",{onClick:()=>M("grid"),className:`flex items-center gap-2 px-3 py-2 rounded-md transition-all ${"grid"===L?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[(0,b.jsx)(m,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"text-sm font-medium hidden sm:inline",children:"Grid"})]})]})]}),0===aa.length?(0,b.jsx)(u,{className:"p-12 text-center",children:(0,b.jsx)("p",{className:"text-gray-500",children:"No templates available at the moment."})}):"list"===L?(0,b.jsx)("div",{className:"space-y-4",children:aa.map(a=>(0,b.jsx)(u,{className:"overflow-hidden hover:shadow-lg transition-all cursor-pointer group bg-white border",onClick:()=>ab(a),children:(0,b.jsxs)("div",{className:"flex items-center gap-4 p-4",children:[(0,b.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,b.jsx)("div",{className:"w-20 h-28 rounded-lg overflow-hidden bg-gray-100 shadow-md",children:(0,b.jsx)("img",{src:a.url,alt:a.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),null===a.userId&&(0,b.jsx)(w,{className:"absolute -top-2 -left-2 bg-blue-100 text-blue-800 text-xs",children:"Default"}),1===a.userId&&(0,b.jsx)(w,{className:"absolute -top-2 -left-2 bg-purple-100 text-purple-800 text-xs",children:"Yours"})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg text-gray-900 truncate",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Updated ",new Date(a.lastModified).toLocaleDateString()]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-3 text-xs text-gray-600",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(d.Eye,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:a.views.toLocaleString()})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(i.CheckCircle2,{className:"h-3.5 w-3.5 text-green-600"}),(0,b.jsx)("span",{children:a.conversions})]}),a.views>0&&(0,b.jsxs)("div",{className:"text-green-600 font-medium",children:[(a.conversions/a.views*100).toFixed(1),"%"]})]})]}),(0,b.jsxs)("div",{className:"hidden sm:flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,b.jsx)(s,{size:"sm",variant:"outline",className:"h-9 w-9 p-0",onClick:b=>{b.stopPropagation(),window.open(a.url,"_blank")},children:(0,b.jsx)(d.Eye,{className:"h-4 w-4"})}),(0,b.jsx)("div",{onClick:a=>a.stopPropagation(),children:(0,b.jsx)(y,{size:"sm",onClick:()=>ad(a)})}),(0,b.jsx)(s,{size:"sm",className:"h-9 px-3",onClick:b=>{b.stopPropagation(),ab(a)},disabled:P===a.id,children:P===a.id?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.default,{className:"h-4 w-4 mr-1 animate-spin"}),"Activating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Check,{className:"h-4 w-4 mr-1"}),"Activate"]})})]}),(0,b.jsx)("div",{className:"sm:hidden",children:(0,b.jsx)(s,{size:"sm",className:"h-10 px-4 text-sm",onClick:b=>{b.stopPropagation(),ab(a)},disabled:P===a.id,children:P===a.id?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.default,{className:"h-4 w-4 mr-1 animate-spin"}),"Activating..."]}):"Activate"})})]})},a.id))}):(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:aa.map(a=>(0,b.jsxs)(u,{className:"overflow-hidden hover:shadow-2xl transition-all cursor-pointer group",children:[(0,b.jsxs)("div",{className:"aspect-[5/7] relative rounded-lg overflow-hidden bg-white",children:[(0,b.jsx)("img",{src:a.url,alt:a.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 transition-all flex items-center justify-center",children:(0,b.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsxs)(s,{size:"sm",variant:"secondary",onClick:b=>{b.stopPropagation(),window.open(a.url,"_blank")},children:[(0,b.jsx)(d.Eye,{className:"h-4 w-4 mr-2"})," Preview"]})})}),null===a.userId&&(0,b.jsx)(w,{className:"absolute top-3 left-3 bg-blue-100 text-blue-800 text-xs",children:"Default"}),1===a.userId&&(0,b.jsx)(w,{className:"absolute top-3 left-3 bg-purple-100 text-purple-800 text-xs",children:"Yours"})]}),(0,b.jsxs)(v,{className:"p-5",children:[(0,b.jsx)("h4",{className:"font-semibold text-lg mb-2 line-clamp-1",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Last updated: ",new Date(a.lastModified).toLocaleDateString()]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(s,{size:"sm",className:"flex-1",onClick:()=>ab(a),disabled:P===a.id,children:P===a.id?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.default,{className:"h-4 w-4 mr-2 animate-spin"}),"Activating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Check,{className:"h-4 w-4 mr-2"}),"Activate"]})}),(0,b.jsx)(y,{size:"sm",onClick:()=>ad(a)})]})]})]},a.id))})]}),D&&H&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 bg-black/70 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full overflow-hidden",children:[(0,b.jsx)("div",{className:"bg-green-50 p-6 border-b border-green-200",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(i.CheckCircle2,{className:"h-12 w-12 text-green-600"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-bold",children:"Shareable Link Ready!"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:H.name})]})]}),(0,b.jsx)(s,{variant:"ghost",size:"icon",onClick:()=>E(!1),children:(0,b.jsx)(g.X,{className:"h-5 w-5"})})]})}),(0,b.jsxs)("div",{className:"p-6 space-y-5",children:[(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(t,{value:F,readOnly:!0,className:"font-mono text-sm"}),(0,b.jsx)(s,{onClick:()=>{navigator.clipboard.writeText(F),K(!0),setTimeout(()=>K(!1),2e3)},children:J?"Copied!":"Copy"})]}),(0,b.jsxs)(s,{className:"w-full mt-4",onClick:()=>{window.open(F,"_blank")},children:[(0,b.jsx)(f,{className:"h-4 w-4 mr-2"})," Open in New Tab"]})]})]})}),Y&&(0,b.jsx)(x,{message:Y.message,type:Y.type,onClose:()=>Z(null)}),N&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-5xl h-[90vh] overflow-hidden flex flex-col animate-in fade-in duration-300",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b bg-gradient-to-r from-purple-600 to-indigo-600 text-white",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold",children:["Customize: ",(0,b.jsxs)("span",{className:"text-white/90",children:['"',T,'"']})]}),(0,b.jsx)(s,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/20 rounded-full",onClick:()=>O(!1),children:(0,b.jsx)(g.X,{className:"h-6 w-6"})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-8 bg-gray-50",children:(0,b.jsx)(r,{templateId:V,userId:W})})]})})]})]})})}a.s(["default",()=>z],35970)}];

//# sourceMappingURL=app_landing-pages_page_tsx_344cc70c._.js.map