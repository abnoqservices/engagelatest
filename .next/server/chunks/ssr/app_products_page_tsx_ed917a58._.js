module.exports=[22674,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(47421),e=a.i(40695),f=a.i(5522),g=a.i(87682),h=a.i(88237),i=a.i(76504),j=a.i(54161),k=a.i(46143),l=a.i(80281),m=a.i(15618),n=a.i(87532);let o=(0,a.i(70106).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var p=a.i(84505),q=a.i(79360),r=a.i(24569),s=a.i(5151),t=a.i(23237),u=a.i(81560),v=a.i(13749),w=a.i(50522),x=a.i(71987),y=a.i(38246),z=a.i(17171),A=a.i(46893),B=a.i(53071),C=a.i(2639),D=a.i(70246);function E(){let[a,E]=c.useState([]),[F,G]=c.useState([]),[H,I]=c.useState([]),[J,K]=c.useState(""),[L,M]=c.useState("all"),[N,O]=c.useState("all"),[P,Q]=c.useState(1),[R,S]=c.useState(10),[T,U]=c.useState(0),[V,W]=c.useState(!1),[X,Y]=c.useState(!1),[Z,$]=c.useState(null),{toast:_}=(0,D.useToast)(),aa=H.length===a.length&&a.length>0,ab=H.length>0&&!aa,ac=async()=>{try{let a=await C.default.get("/product-categories");a.data.success&&G(a.data.data||[])}catch(a){_({title:"Error",description:a.response?.data?.message||"Failed to load categories",variant:"destructive"})}},ad=async()=>{W(!0);try{let a={page:P,per_page:R};J.trim()&&(a.search=J.trim()),"all"!==L&&(a.category_id=L),"all"!==N&&(a.is_active=+("active"===N));let b=await C.default.get("/products",{params:a});if(b.data.success&&b.data.data){let a=b.data.data.data||[],c=b.data.data,d=a.map(a=>({id:a.id,image:a.images?.length>0?a.images[0]:"https://www.thekeepingroomnc.com/wp-content/uploads/2020/04/image-placeholder.jpg",name:a.name,sku:a.sku||"N/A",category:a.category?.name||"Uncategorized",categoryId:a.category?.id||0,price:a.price?`$${parseFloat(a.price).toFixed(2)}`:"$0.00",scans:a.scans||0,views:a.views||0,leads:a.leads||0,status:a.is_active??!0}));E(d),U(c.total||c.meta?.total||d.length)}}catch(a){console.error("Failed to fetch products",a),_({title:"Error",description:a.response?.data?.message||"Failed to load products",variant:"destructive"}),E([]),U(0)}finally{W(!1)}};c.useEffect(()=>{ad()},[P,R,J,L,N]),c.useEffect(()=>{ac()},[]),c.useEffect(()=>{Q(1)},[J,L,N,R]);let ae=a=>{$(a),Y(!0)},af=(a,c=0,d="")=>a.flatMap((a,e)=>{let f="— ".repeat(c),h=`${d}${a.id}-${c}-${e}`;return[(0,b.jsxs)(g.SelectItem,{value:a.id.toString(),children:[f,a.name]},h),...a.children?.length?af(a.children,c+1,`${h}-`):[]]}),ag=T>0?Math.ceil(T/R):1,ah=0===T?0:(P-1)*R+1,ai=Math.min(P*R,T);return(0,b.jsxs)(d.DashboardLayout,{children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Products"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your product catalog and QR codes"})]}),(0,b.jsx)(y.default,{href:"/products/new",children:(0,b.jsxs)(e.Button,{className:"gap-2",children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4"}),"Add Product"]})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-4 rounded-xl border border-slate-200 bg-card p-4 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(f.Input,{placeholder:"Search by name or SKU...",value:J,onChange:a=>K(a.target.value),className:"pl-10"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(g.Select,{value:L,onValueChange:M,children:[(0,b.jsx)(g.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(g.SelectValue,{placeholder:"All Categories"})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"all",children:"All Categories"}),af(F)]})]}),(0,b.jsxs)(g.Select,{value:N,onValueChange:O,children:[(0,b.jsx)(g.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(g.SelectValue,{placeholder:"All Status"})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(g.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(g.SelectItem,{value:"inactive",children:"Inactive"})]})]}),(0,b.jsx)(e.Button,{variant:"outline",size:"icon",disabled:!0,children:(0,b.jsx)(o,{className:"h-4 w-4"})}),(0,b.jsxs)(i.DropdownMenu,{children:[(0,b.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(e.Button,{variant:"outline",className:"gap-2",children:[(0,b.jsx)(p.Download,{className:"h-4 w-4"}),"Export"]})}),(0,b.jsxs)(i.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(i.DropdownMenuItem,{children:"Export as CSV"}),(0,b.jsx)(i.DropdownMenuItem,{children:"Export as XLSX"})]})]})]})]}),H.length>0&&(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-lg bg-primary/10 px-4 py-2 text-sm",children:[(0,b.jsxs)("span",{className:"font-medium text-primary",children:[H.length," selected"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"sm",children:"Bulk Edit"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",children:"Generate QRs"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",children:"Export"}),(0,b.jsxs)(e.Button,{variant:"outline",size:"sm",className:"text-destructive",children:[(0,b.jsx)(u.Trash2,{className:"h-3 w-3 mr-1"})," Delete"]})]})]})]}),(0,b.jsx)("div",{className:"rounded-xl border bg-card shadow-sm overflow-x-auto",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{className:"w-12",children:(0,b.jsx)(k.Checkbox,{checked:!!aa||!!ab&&"indeterminate",onCheckedChange:()=>{I(aa?[]:a.map(a=>a.id.toString()))}})}),(0,b.jsx)(h.TableHead,{children:"Image"}),(0,b.jsx)(h.TableHead,{children:"Name"}),(0,b.jsx)(h.TableHead,{children:"SKU"}),(0,b.jsx)(h.TableHead,{children:"Category"}),(0,b.jsx)(h.TableHead,{children:"Price"}),(0,b.jsx)(h.TableHead,{className:"text-center",children:"Scans"}),(0,b.jsx)(h.TableHead,{className:"text-center",children:"Views"}),(0,b.jsx)(h.TableHead,{className:"text-center",children:"Leads"}),(0,b.jsx)(h.TableHead,{className:"text-center",children:"Status"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Actions"})]})}),(0,b.jsx)(h.TableBody,{children:V?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:11,className:"text-center py-10",children:"Loading products..."})}):0===a.length?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:11,className:"text-center py-10 text-muted-foreground",children:J||"all"!==L||"all"!==N?"No products match your filters":"No products found"})}):a.map(a=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(k.Checkbox,{checked:H.includes(a.id.toString()),onCheckedChange:()=>{let b;return b=a.id.toString(),void I(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])}})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(x.default,{src:a.image,alt:a.name,width:40,height:40,className:"rounded-md object-cover"})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)("button",{onClick:()=>ae(a),className:"font-medium text-blue-600 hover:underline",children:a.name})}),(0,b.jsx)(h.TableCell,{className:"font-mono text-sm",children:a.sku}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(j.Badge,{variant:"outline",children:a.category})}),(0,b.jsx)(h.TableCell,{className:"font-semibold",children:a.price}),(0,b.jsx)(h.TableCell,{className:"text-center",children:a.scans}),(0,b.jsx)(h.TableCell,{className:"text-center",children:a.views}),(0,b.jsx)(h.TableCell,{className:"text-center",children:a.leads}),(0,b.jsx)(h.TableCell,{className:"text-center",children:(0,b.jsx)(l.Switch,{checked:a.status,disabled:!0})}),(0,b.jsx)(h.TableCell,{className:"text-right",children:(0,b.jsxs)(i.DropdownMenu,{children:[(0,b.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(e.Button,{variant:"ghost",size:"icon",children:(0,b.jsx)(q.MoreVertical,{className:"h-4 w-4"})})}),(0,b.jsxs)(i.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>ae(a),children:[(0,b.jsx)(r.Edit,{className:"mr-2 h-4 w-4"})," Edit"]}),(0,b.jsxs)(i.DropdownMenuItem,{children:[(0,b.jsx)(s.Copy,{className:"mr-2 h-4 w-4"})," Clone"]}),(0,b.jsxs)(i.DropdownMenuItem,{children:[(0,b.jsx)(t.QrCode,{className:"mr-2 h-4 w-4"})," QR Code"]}),(0,b.jsx)(i.DropdownMenuSeparator,{}),(0,b.jsxs)(i.DropdownMenuItem,{className:"text-destructive",children:[(0,b.jsx)(u.Trash2,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},a.id))})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between border-t bg-card px-6 py-4",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:T>0?(0,b.jsxs)(b.Fragment,{children:["Showing ",(0,b.jsxs)("strong",{children:[ah,"–",ai]})," of ",(0,b.jsx)("strong",{children:T})," products"]}):"No products to display"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(g.Select,{value:R.toString(),onValueChange:a=>S(Number(a)),children:[(0,b.jsx)(g.SelectTrigger,{className:"w-[100px]",children:(0,b.jsx)(g.SelectValue,{})}),(0,b.jsxs)(g.SelectContent,{children:[(0,b.jsx)(g.SelectItem,{value:"10",children:"10 / page"}),(0,b.jsx)(g.SelectItem,{value:"20",children:"20 / page"}),(0,b.jsx)(g.SelectItem,{value:"50",children:"50 / page"}),(0,b.jsx)(g.SelectItem,{value:"100",children:"100 / page"})]})]}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"icon",disabled:P<=1||V,onClick:()=>Q(a=>a-1),children:(0,b.jsx)(v.ChevronLeft,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{variant:"outline",size:"icon",disabled:P>=ag||V,onClick:()=>Q(a=>a+1),children:(0,b.jsx)(w.ChevronRight,{className:"h-4 w-4"})})]})]})]})]}),(0,b.jsx)(B.Sheet,{open:X,onOpenChange:Y,children:(0,b.jsxs)(B.SheetContent,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[(0,b.jsx)("div",{className:"sticky top-0 bg-background border-b z-10",children:(0,b.jsxs)(B.SheetHeader,{className:"px-6 py-4",children:[(0,b.jsx)(B.SheetTitle,{className:"text-2xl font-bold",children:"Edit Product"}),(0,b.jsx)(B.SheetDescription,{children:"Update product information"})]})}),Z&&(0,b.jsxs)("div",{className:"space-y-6 p-6",children:[(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(z.Label,{children:"Product Name"}),(0,b.jsx)(f.Input,{defaultValue:Z.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(z.Label,{children:"SKU"}),(0,b.jsx)(f.Input,{defaultValue:Z.sku})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(z.Label,{children:"Price"}),(0,b.jsx)(f.Input,{defaultValue:Z.price.replace("$","")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(z.Label,{children:"Category"}),(0,b.jsxs)(g.Select,{defaultValue:Z.categoryId.toString(),children:[(0,b.jsx)(g.SelectTrigger,{children:(0,b.jsx)(g.SelectValue,{placeholder:"Select category"})}),(0,b.jsx)(g.SelectContent,{children:af(F)})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(z.Label,{children:"Description"}),(0,b.jsx)(A.Textarea,{rows:4,defaultValue:"Premium quality product with advanced features."})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-6 border-t sticky bottom-0 bg-background",children:[(0,b.jsx)(e.Button,{variant:"outline",className:"flex-1",onClick:()=>Y(!1),children:"Cancel"}),(0,b.jsx)(e.Button,{className:"flex-1",onClick:()=>Y(!1),children:"Save Changes"})]})]})]})})]})}a.s(["default",()=>E],22674)}];

//# sourceMappingURL=app_products_page_tsx_ed917a58._.js.map