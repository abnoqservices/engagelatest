module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f])},77991,a=>{"use strict";var b=a.i(4699);a.s(["ChevronDownIcon",()=>b.default])},83497,a=>{"use strict";let b=(0,a.i(70106).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);a.s(["Package",()=>b],83497)},34157,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["default",()=>b])},5784,4699,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["default",()=>b],4699),a.s(["ChevronDown",()=>b],5784)},33441,a=>{"use strict";var b=a.i(34157);a.s(["Check",()=>b.default])},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},70106,a=>{"use strict";var b=a.i(72131);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],70106)},92258,a=>{"use strict";let b=(0,a.i(70106).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);a.s(["Mail",()=>b],92258)},7554,a=>{"use strict";function b(a,c,{checkForDefaultPrevented:d=!0}={}){return function(b){if(a?.(b),!1===d||!b.defaultPrevented)return c?.(b)}}a.s(["composeEventHandlers",()=>b])},50104,a=>{"use strict";var b=a.i(72131),c=a.i(87924);function d(a,d){let e=b.createContext(d),f=a=>{let{children:d,...f}=a,g=b.useMemo(()=>f,Object.values(f));return(0,c.jsx)(e.Provider,{value:g,children:d})};return f.displayName=a+"Provider",[f,function(c){let f=b.useContext(e);if(f)return f;if(void 0!==d)return d;throw Error(`\`${c}\` must be used within \`${a}\``)}]}function e(a,d=[]){let f=[],g=()=>{let c=f.map(a=>b.createContext(a));return function(d){let e=d?.[a]||c;return b.useMemo(()=>({[`__scope${a}`]:{...d,[a]:e}}),[d,e])}};return g.scopeName=a,[function(d,e){let g=b.createContext(e),h=f.length;f=[...f,e];let i=d=>{let{scope:e,children:f,...i}=d,j=e?.[a]?.[h]||g,k=b.useMemo(()=>i,Object.values(i));return(0,c.jsx)(j.Provider,{value:k,children:f})};return i.displayName=d+"Provider",[i,function(c,f){let i=f?.[a]?.[h]||g,j=b.useContext(i);if(j)return j;if(void 0!==e)return e;throw Error(`\`${c}\` must be used within \`${d}\``)}]},function(...a){let c=a[0];if(1===a.length)return c;let d=()=>{let d=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=d.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return b.useMemo(()=>({[`__scope${c.scopeName}`]:e}),[e])}};return d.scopeName=c.scopeName,d}(g,...d)]}a.s(["createContext",()=>d,"createContextScope",()=>e])},25152,46872,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef(a);return b.useEffect(()=>{c.current=a}),b.useMemo(()=>(...a)=>c.current?.(...a),[])}function d({prop:a,defaultProp:d,onChange:e=()=>{}}){let[f,g]=function({defaultProp:a,onChange:d}){let e=b.useState(a),[f]=e,g=b.useRef(f),h=c(d);return b.useEffect(()=>{g.current!==f&&(h(f),g.current=f)},[f,g,h]),e}({defaultProp:d,onChange:e}),h=void 0!==a,i=h?a:f,j=c(e);return[i,b.useCallback(b=>{if(h){let c="function"==typeof b?b(a):b;c!==a&&j(c)}else g(b)},[h,a,g,j])]}a.s(["useCallbackRef",()=>c],46872),a.s(["useControllableState",()=>d],25152)},72752,a=>{"use strict";var b=a.i(72131),c=globalThis?.document?b.useLayoutEffect:()=>{};a.s(["useLayoutEffect",()=>c])},77192,a=>{"use strict";var b=a.i(72131),c=a.i(70121),d=a.i(72752),e=a=>{var e;let g,h,{present:i,children:j}=a,k=function(a){var c,e;let[g,h]=b.useState(),i=b.useRef({}),j=b.useRef(a),k=b.useRef("none"),[l,m]=(c=a?"mounted":"unmounted",e={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},b.useReducer((a,b)=>e[a][b]??a,c));return b.useEffect(()=>{let a=f(i.current);k.current="mounted"===l?a:"none"},[l]),(0,d.useLayoutEffect)(()=>{let b=i.current,c=j.current;if(c!==a){let d=k.current,e=f(b);a?m("MOUNT"):"none"===e||b?.display==="none"?m("UNMOUNT"):c&&d!==e?m("ANIMATION_OUT"):m("UNMOUNT"),j.current=a}},[a,m]),(0,d.useLayoutEffect)(()=>{if(g){let a,b=g.ownerDocument.defaultView??window,c=c=>{let d=f(i.current).includes(c.animationName);if(c.target===g&&d&&(m("ANIMATION_END"),!j.current)){let c=g.style.animationFillMode;g.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===g.style.animationFillMode&&(g.style.animationFillMode=c)})}},d=a=>{a.target===g&&(k.current=f(i.current))};return g.addEventListener("animationstart",d),g.addEventListener("animationcancel",c),g.addEventListener("animationend",c),()=>{b.clearTimeout(a),g.removeEventListener("animationstart",d),g.removeEventListener("animationcancel",c),g.removeEventListener("animationend",c)}}m("ANIMATION_END")},[g,m]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(a=>{a&&(i.current=getComputedStyle(a)),h(a)},[])}}(i),l="function"==typeof j?j({present:k.isPresent}):b.Children.only(j),m=(0,c.useComposedRefs)(k.ref,(e=l,(h=(g=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.ref:(h=(g=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in g&&g.isReactWarning)?e.props.ref:e.props.ref||e.ref));return"function"==typeof j||k.isPresent?b.cloneElement(l,{ref:m}):null};function f(a){return a?.animationName||"none"}e.displayName="Presence",a.s(["Presence",()=>e])},3688,a=>{"use strict";var b=a.i(72131),c=a.i(72752);function d(a){let[d,e]=b.useState(void 0);return(0,c.useLayoutEffect)(()=>{if(a){e({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let c,d;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;c=b.inlineSize,d=b.blockSize}else c=a.offsetWidth,d=a.offsetHeight;e({width:c,height:d})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}e(void 0)},[a]),d}a.s(["useSize",()=>d])},6406,a=>{"use strict";var b=a.i(34157);a.s(["CheckIcon",()=>b.default])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},14548,a=>{"use strict";let b=(0,a.i(70106).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],14548)},15618,81560,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>c],15618);let d=(0,b.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>d],81560)},50522,a=>{"use strict";var b=a.i(11989);a.s(["ChevronRight",()=>b.default])},4650,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["default",()=>b])},88466,a=>{"use strict";var b=a.i(87924),c=a.i(4650),c=c,d=a.i(97895);function e({className:a,...e}){return(0,b.jsx)(c.default,{role:"status","aria-label":"Loading",className:(0,d.cn)("size-4 animate-spin",a),...e})}a.s(["Spinner",()=>e],88466)},59572,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(47421),e=a.i(40695),f=a.i(5522),g=a.i(17171),h=a.i(87682),i=a.i(3130),j=a.i(15618),k=a.i(81560),l=a.i(14548);let m=(0,a.i(70106).default)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var n=a.i(50522),o=a.i(5784),p=a.i(88466),q=a.i(2639),r=a.i(232);function s(){let[a,s]=c.useState([]),[t,u]=c.useState([]),[v,w]=c.useState(!0),[x,y]=c.useState(!1),[z,A]=c.useState(new Set),[B,C]=c.useState({name:"",slug:"",description:"",parent_id:null});c.useEffect(()=>{D()},[]);let D=async()=>{try{w(!0);let a=await q.default.get("/product-categories");if(a.data.success&&Array.isArray(a.data.data)){let b,c,d,e=a.data.data;s(e),u((b=new Map,c=[],e.forEach(a=>{b.set(a.id,{...a,children:[]})}),b.forEach(a=>{if(null===a.parent_id)c.push(a);else{let c=b.get(a.parent_id);c&&c.children.push(a)}}),d=a=>{a.children.sort((a,b)=>a.name.localeCompare(b.name)),a.children.forEach(d)},c.forEach(d),c))}}catch(a){(0,r.showToast)(a.response?.data?.message||"Failed to load categories","error")}finally{w(!1)}};c.useEffect(()=>{if(B.name){let a=B.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");C(b=>({...b,slug:a}))}},[B.name]);let E=async()=>{if(!B.name.trim())return(0,r.showToast)("Name is required","error");y(!0);try{await q.default.post("/product-categories",{name:B.name.trim(),slug:B.slug.trim()||void 0,description:B.description.trim()||null,parent_id:B.parent_id}),(0,r.showToast)("Saved successfully!","success"),C({name:"",slug:"",description:"",parent_id:null}),await D()}catch(a){(0,r.showToast)(a.response?.data?.message||"Save failed","error")}finally{y(!1)}},F=async a=>{if(confirm("Delete this category and all subcategories?"))try{await q.default.delete(`/product-categories/${a}`),(0,r.showToast)("Deleted","success"),await D()}catch(a){(0,r.showToast)(a.response?.data?.message||"Delete failed","error")}},G=(a,c=0)=>a.map(a=>{let d=a.children.length>0,f=z.has(a.id);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 py-2.5 px-3 hover:bg-accent/70 rounded-lg group",style:{paddingLeft:`${40*c+20}px`},children:[(0,b.jsx)("button",{onClick:b=>{var c;b.stopPropagation(),d&&(c=a.id,A(a=>{let b=new Set(a);return b.has(c)?b.delete(c):b.add(c),b}))},className:"w-7 h-7 flex items-center justify-center text-muted-foreground",children:d?f?(0,b.jsx)(o.ChevronDown,{className:"h-4 w-4"}):(0,b.jsx)(n.ChevronRight,{className:"h-4 w-4"}):(0,b.jsx)("span",{className:"w-4"})}),(0,b.jsx)(m,{className:"h-5 w-5 text-blue-600"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),(a.description||a.slug)&&(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:a.description||a.slug})]}),(0,b.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)(e.Button,{size:"sm",variant:"ghost",onClick:()=>{var b,c;return b=a.id,c=a.name,void(C({name:"",slug:"",description:"",parent_id:b}),(0,r.showToast)(`Adding under: ${c}`,"info"),document.getElementById("add-form")?.scrollIntoView({behavior:"smooth"}))},children:(0,b.jsx)(j.Plus,{className:"h-4 w-4"})}),(0,b.jsx)(e.Button,{size:"icon",variant:"ghost",className:"text-destructive",onClick:()=>F(a.id),children:(0,b.jsx)(k.Trash2,{className:"h-4 w-4"})})]})]}),d&&f&&(0,b.jsx)("div",{className:"border-l-2 border-border ml-10",children:G(a.children,c+1)})]},a.id)});return(0,b.jsx)(d.DashboardLayout,{children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 py-6",children:[(0,b.jsx)("div",{className:"flex justify-between items-start",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Product Categories"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Proper nested hierarchy"})]})}),(0,b.jsxs)(i.Card,{id:"add-form",children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Plus,{className:"h-5 w-5"}),B.parent_id?`Add Subcategory â†’ ${a.find(a=>a.id===B.parent_id)?.name||""}`:"Add New Root Category"]})}),(0,b.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"mb-2",children:"Name *"}),(0,b.jsx)(f.Input,{value:B.name,onChange:a=>C({...B,name:a.target.value}),placeholder:"Mobile Phones & Accessories",autoFocus:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"mb-2",children:"Slug (auto-generated)"}),(0,b.jsx)(f.Input,{value:B.slug,onChange:a=>C({...B,slug:a.target.value}),placeholder:""})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{className:"mb-2",children:"Description (optional)"}),(0,b.jsx)(f.Input,{value:B.description,onChange:a=>C({...B,description:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Parent Category"}),(0,b.jsxs)(h.Select,{value:B.parent_id?.toString()||"root",onValueChange:a=>C({...B,parent_id:"root"===a?null:Number(a)}),children:[(0,b.jsxs)(h.SelectTrigger,{children:[(0,b.jsx)(h.SelectValue,{placeholder:"Root category"})," "]}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"root",children:"Root (no parent)"}),a.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)(e.Button,{onClick:E,disabled:x,children:[x?(0,b.jsx)(p.Spinner,{}):(0,b.jsx)(l.Save,{className:"h-4 w-4 mr-2"}),x?"Saving...":"Save"]}),B.parent_id&&(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>C({...B,parent_id:null}),children:"Cancel"})]})]})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsxs)(i.CardTitle,{children:["All Categories (",a.length,")"]})}),(0,b.jsx)(i.CardContent,{children:v?(0,b.jsx)("div",{className:"flex justify-center py-16",children:(0,b.jsx)(p.Spinner,{className:"size-8"})}):0===t.length?(0,b.jsxs)("div",{className:"text-center py-16 text-muted-foreground",children:[(0,b.jsx)(m,{className:"h-16 w-16 mx-auto mb-4 opacity-20"}),(0,b.jsx)("p",{children:"No categories yet"})]}):(0,b.jsx)("div",{className:"border rounded-lg bg-muted/30 p-4",children:G(t)})})]})]})})}a.s(["default",()=>s],59572)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2aed4263._.js.map