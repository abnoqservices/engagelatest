{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/D/next/engage333/app/api/upload-images/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport path from \"path\";\nimport fs from \"fs/promises\";\n\nexport async function POST(req: Request) {\n  try {\n    const formData = await req.formData();\n    const file = formData.get(\"file\") as File | null;\n\n    if (!file) {\n      return NextResponse.json(\n        { success: false, message: \"No file uploaded\" },\n        { status: 400 }\n      );\n    }\n\n    const bytes = await file.arrayBuffer();\n    const buffer = Buffer.from(bytes);\n\n    const uploadDir = path.join(process.cwd(), \"public/uploads\");\n    await fs.mkdir(uploadDir, { recursive: true });\n\n    const fileName = `${Date.now()}-${file.name}`;\n    const filePath = path.join(uploadDir, fileName);\n\n    await fs.writeFile(filePath, buffer);\n\n    const fileUrl = `/uploads/${fileName}`;\n\n    // âœ… VERY IMPORTANT: valid JSON response\n    return NextResponse.json({\n      success: true,\n      data: {\n        url: fileUrl,\n        s3_key: fileName,\n        name: file.name,\n      },\n    });\n  } catch (error) {\n    console.error(\"Upload error:\", error);\n\n    return NextResponse.json(\n      {\n        success: false,\n        message: \"Upload failed\",\n      },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,QAAQ;QACnC,MAAM,OAAO,SAAS,GAAG,CAAC;QAE1B,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,SAAS;YAAmB,GAC9C;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,QAAQ,MAAM,KAAK,WAAW;QACpC,MAAM,SAAS,OAAO,IAAI,CAAC;QAE3B,MAAM,YAAY,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;QAC3C,MAAM,gIAAE,CAAC,KAAK,CAAC,WAAW;YAAE,WAAW;QAAK;QAE5C,MAAM,WAAW,GAAG,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,IAAI,EAAE;QAC7C,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,WAAW;QAEtC,MAAM,gIAAE,CAAC,SAAS,CAAC,UAAU;QAE7B,MAAM,UAAU,CAAC,SAAS,EAAE,UAAU;QAEtC,wCAAwC;QACxC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,MAAM;gBACJ,KAAK;gBACL,QAAQ;gBACR,MAAM,KAAK,IAAI;YACjB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB;QAE/B,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,SAAS;QACX,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}