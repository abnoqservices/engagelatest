{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/D/next/engage333/app/api/qr/route.ts"],"sourcesContent":["// app/api/products/route.ts   (or rename folder to qr)\nimport { NextRequest, NextResponse } from \"next/server\";\nimport QRCodeStyling from \"qr-code-styling\";\n//import { JSDOM } from \"jsdom\";\nimport { createCanvas } from \"canvas\";\nimport { v4 as uuidv4 } from \"uuid\";\n\n// const getQrOptions = (data: string) => ({\n//   width: 400,\n//   height: 400,\n//   data,\n//   margin: 5,\n//   type: \"png\" as const,\n//   qrOptions: { errorCorrectionLevel: \"H\" },\n//   dotsOptions: {\n//     type: \"rounded\",\n//     color: \"#000000\",\n//   },\n//   backgroundOptions: { color: \"#ffffff\" },\n// });\n\nexport async function POST(req: NextRequest) {\n  try {\n    const body = await req.json();\n    const { baseUrl } = body;\n console.log(\"Received baseUrl:\", baseUrl);\n    // if (!baseUrl || typeof baseUrl !== \"string\") {\n    //   return NextResponse.json(\n    //     { error: \"baseUrl is required and must be a valid string\" },\n    //     { status: 400 }\n    //   );\n    // }\n\n    // const productId = uuidv4(); // or get from DB in real app\n    // const qrTargetUrl = `${baseUrl}/${productId}`;\n\n    // const dom = new JSDOM(\"<!DOCTYPE html><div id='qr-container'></div>\");\n\n    // const qr = new QRCodeStyling({\n    //   ...getQrOptions(qrTargetUrl),\n    //   jsdom: JSDOM,\n    //   nodeCanvas: createCanvas,\n    // });\n\n    // const qrBuffer = await qr.getRawData(\"png\");\n    // const qrBase64 = qrBuffer.toString(\"base64\");\n\n    // return NextResponse.json({\n    //   success: true,\n    //   productId,\n    //   qrTargetUrl,\n    //   qrImageBase64: `data:image/png;base64,${qrBase64}`,\n    // });\n  } catch (err: any) {\n    console.error(\"QR generation error:\", err);\n    return NextResponse.json(\n      {\n        error: \"Failed to generate QR code\",\n        details: err.message || \"Internal server error\",\n      },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":"AAAA,uDAAuD;;;;;AACvD;;AAoBO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,OAAO,EAAE,GAAG;QACvB,QAAQ,GAAG,CAAC,qBAAqB;IAC9B,iDAAiD;IACjD,8BAA8B;IAC9B,mEAAmE;IACnE,sBAAsB;IACtB,OAAO;IACP,IAAI;IAEJ,4DAA4D;IAC5D,iDAAiD;IAEjD,yEAAyE;IAEzE,iCAAiC;IACjC,kCAAkC;IAClC,kBAAkB;IAClB,8BAA8B;IAC9B,MAAM;IAEN,+CAA+C;IAC/C,gDAAgD;IAEhD,6BAA6B;IAC7B,mBAAmB;IACnB,eAAe;IACf,iBAAiB;IACjB,wDAAwD;IACxD,MAAM;IACR,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,OAAO;YACP,SAAS,IAAI,OAAO,IAAI;QAC1B,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}