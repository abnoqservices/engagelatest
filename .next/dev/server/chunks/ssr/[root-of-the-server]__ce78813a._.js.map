{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/D/next/engage33/lib/axiosClient.ts"],"sourcesContent":["import axios from \"axios\";\n\nconst axiosClient = axios.create({\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\n  headers: {\n    Accept: \"application/json\",\n  },\n});\n\n//  Attach token to every request\naxiosClient.interceptors.request.use((config) => {\n  if (typeof window !== \"undefined\") {\n    const token = localStorage.getItem(\"token\"); //  MUST be \"token\"\n\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n  }\n\n  return config;\n});\nexport default axiosClient;\n//  Auto logout on 401 (important)\n// axiosClient.interceptors.response.use(\n//   (response) => response,\n//   (error) => {\n//     if (error.response?.status === 401) {\n//       localStorage.removeItem(\"token\");\n//       localStorage.removeItem(\"user\");\n//       window.location.href = \"/signin\";\n//     }\n\n//     return Promise.reject(error);\n//   }\n// );\n\n\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,gJAAK,CAAC,MAAM,CAAC;IAC/B,OAAO;IACP,SAAS;QACP,QAAQ;IACV;AACF;AAEA,iCAAiC;AACjC,YAAY,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IACpC;;IAQA,OAAO;AACT;uCACe;CACf,kCAAkC;CAClC,yCAAyC;CACzC,4BAA4B;CAC5B,iBAAiB;CACjB,4CAA4C;CAC5C,0CAA0C;CAC1C,yCAAyC;CACzC,0CAA0C;CAC1C,QAAQ;CAER,oCAAoC;CACpC,MAAM;CACN,KAAK"}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/D/next/engage33/components/tempcomponent/YouTube.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axiosClient from \"@/lib/axiosClient\";\n\ninterface YouTubeProps {\n  productId: number;\n  YouTube?: boolean;\n}\n\ninterface ProductData {\n  video_url?: string;\n}\n\nexport default function YouTube({ productId, YouTube = true }: YouTubeProps) {\n  const [videoUrl, setVideoUrl] = useState<string>(\"\");\n  const [isYouTube, setIsYouTube] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    const fetchProduct = async () => {\n      try {\n        setLoading(true);\n        const response = await axiosClient.get(`/products/${productId}`);\n\n        if (response.data.success) {\n          const url = response.data.data.video_url?.trim() || \"\";\n\n          if (url) {\n            setVideoUrl(url);\n            const isYt =\n              url.includes(\"youtube.com\") ||\n              url.includes(\"youtu.be\") ||\n              url.includes(\"youtube-nocookie.com\");\n            setIsYouTube(isYt);\n          } else {\n            setVideoUrl(\"\");\n            setIsYouTube(false);\n          }\n        }\n      } catch (err) {\n        console.error(\"Error fetching product video:\", err);\n        setVideoUrl(\"\");\n        setIsYouTube(false);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (productId) {\n      fetchProduct();\n    }\n  }, [productId]);\n\n  // Convert YouTube URL to embed URL\n  const getYouTubeEmbedUrl = (url: string): string => {\n    if (!url) return \"\";\n\n    let videoId: string | undefined;\n\n    if (url.includes(\"v=\")) {\n      videoId = url.split(\"v=\")[1]?.split(\"&\")[0]?.split(\"#\")[0];\n    } else if (url.includes(\"youtu.be/\")) {\n      videoId = url.split(\"youtu.be/\")[1]?.split(\"?\")[0]?.split(\"#\")[0];\n    } else if (url.includes(\"/embed/\")) {\n      videoId = url.split(\"/embed/\")[1]?.split(\"?\")[0];\n    } else if (url.includes(\"/shorts/\")) {\n      videoId = url.split(\"/shorts/\")[1]?.split(\"?\")[0];\n    }\n\n    return videoId ? `https://www.youtube.com/embed/${videoId}` : \"\";\n  };\n\n  const embedUrl = isYouTube ? getYouTubeEmbedUrl(videoUrl) : \"\";\n\n  // Early returns\n  if (!YouTube) return null;\n\n  if (loading) {\n    return (\n      <div className=\"w-full aspect-video flex items-center justify-center bg-gray-100 rounded-lg\">\n        <p className=\"text-gray-500\">Loading video...</p>\n      </div>\n    );\n  }\n\n  if (!videoUrl) {\n    return null; // No video at all\n  }\n\n  return (\n    <div className=\"card-header\">\n    <div className=\"w-full aspect-video relative rounded-lg overflow-hidden shadow-lg bg-black py-4\">\n      {/* YouTube Video - Only render iframe if embedUrl is valid */}\n      {isYouTube && embedUrl ? (\n        <iframe\n          src={embedUrl}\n          className=\"absolute top-0 left-0 w-full h-full\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n          allowFullScreen\n          title=\"Product Video\"\n        />\n      ) : (\n        /* Direct Video File (MP4, etc.) */\n        <video\n          className=\"absolute top-0 left-0 w-full h-full object-contain bg-black\"\n          controls\n          playsInline\n          preload=\"metadata\"\n        >\n          <source src={videoUrl} type=\"video/mp4\" />\n          <source src={videoUrl} type=\"video/webm\" />\n          <source src={videoUrl} type=\"video/ogg\" />\n          Your browser does not support the video tag.\n        </video>\n      )}\n    </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAWe,SAAS,QAAQ,EAAE,SAAS,EAAE,UAAU,IAAI,EAAgB;IACzE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAS;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAU;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAU;IAEhD,IAAA,kNAAS,EAAC;QACR,MAAM,eAAe;YACnB,IAAI;gBACF,WAAW;gBACX,MAAM,WAAW,MAAM,6HAAW,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,WAAW;gBAE/D,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;oBACzB,MAAM,MAAM,SAAS,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU;oBAEpD,IAAI,KAAK;wBACP,YAAY;wBACZ,MAAM,OACJ,IAAI,QAAQ,CAAC,kBACb,IAAI,QAAQ,CAAC,eACb,IAAI,QAAQ,CAAC;wBACf,aAAa;oBACf,OAAO;wBACL,YAAY;wBACZ,aAAa;oBACf;gBACF;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,iCAAiC;gBAC/C,YAAY;gBACZ,aAAa;YACf,SAAU;gBACR,WAAW;YACb;QACF;QAEA,IAAI,WAAW;YACb;QACF;IACF,GAAG;QAAC;KAAU;IAEd,mCAAmC;IACnC,MAAM,qBAAqB,CAAC;QAC1B,IAAI,CAAC,KAAK,OAAO;QAEjB,IAAI;QAEJ,IAAI,IAAI,QAAQ,CAAC,OAAO;YACtB,UAAU,IAAI,KAAK,CAAC,KAAK,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE;QAC5D,OAAO,IAAI,IAAI,QAAQ,CAAC,cAAc;YACpC,UAAU,IAAI,KAAK,CAAC,YAAY,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE;QACnE,OAAO,IAAI,IAAI,QAAQ,CAAC,YAAY;YAClC,UAAU,IAAI,KAAK,CAAC,UAAU,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE;QAClD,OAAO,IAAI,IAAI,QAAQ,CAAC,aAAa;YACnC,UAAU,IAAI,KAAK,CAAC,WAAW,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE;QACnD;QAEA,OAAO,UAAU,CAAC,8BAA8B,EAAE,SAAS,GAAG;IAChE;IAEA,MAAM,WAAW,YAAY,mBAAmB,YAAY;IAE5D,gBAAgB;IAChB,IAAI,CAAC,SAAS,OAAO;IAErB,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAE,WAAU;0BAAgB;;;;;;;;;;;IAGnC;IAEA,IAAI,CAAC,UAAU;QACb,OAAO,MAAM,kBAAkB;IACjC;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACf,cAAA,8OAAC;YAAI,WAAU;sBAEZ,aAAa,yBACZ,8OAAC;gBACC,KAAK;gBACL,WAAU;gBACV,OAAM;gBACN,eAAe;gBACf,OAAM;;;;;uBAGR,iCAAiC,iBACjC,8OAAC;gBACC,WAAU;gBACV,QAAQ;gBACR,WAAW;gBACX,SAAQ;;kCAER,8OAAC;wBAAO,KAAK;wBAAU,MAAK;;;;;;kCAC5B,8OAAC;wBAAO,KAAK;wBAAU,MAAK;;;;;;kCAC5B,8OAAC;wBAAO,KAAK;wBAAU,MAAK;;;;;;oBAAc;;;;;;;;;;;;;;;;;AAOpD"}}]
}