{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/D/next/engage333/components/tempcomponent/slider.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\nimport { Pagination, Autoplay } from \"swiper/modules\";\r\nimport \"swiper/css\";\r\nimport \"swiper/css/pagination\";\r\nimport axiosClient from \"@/lib/axiosClient\";\r\n\r\nconst DEFAULT_IMAGE =\r\n  \"https://lh3.googleusercontent.com/hzTpTV1Qwyi4crcaB_lEaRTg603ttzm_6Uw8SwBC-iQ9-PeWdFdNpejyPzFdVqWLBjf8o58sDjs8M9wV01MCyjJ3XX6GBIiUrLRiQi9ui8m0tp0\";\r\n\r\ninterface GalleryImage {\r\n  id: number;\r\n  url: string;\r\n  position: number;\r\n}\r\n\r\ninterface SliderProps {\r\n  productId: number;\r\n  product_gallery?: boolean; // Made optional and default to true\r\n}\r\n\r\nexport default function Slider({ productId, product_gallery = true }: SliderProps) {\r\n  const [images, setImages] = useState<GalleryImage[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // All hooks are called unconditionally â€” this is REQUIRED\r\n\r\n  useEffect(() => {\r\n    const fetchImages = async () => {\r\n      if (!productId) {\r\n        setImages([{ id: 0, url: DEFAULT_IMAGE, position: 1 }]);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        const res = await axiosClient.get(\"/product-images\", {\r\n          params: { product_id: productId },\r\n        });\r\n\r\n        if (!res.data?.success) {\r\n          throw new Error(res.data?.message || \"API returned success: false\");\r\n        }\r\n\r\n        const galleryImages = (res.data.data || [])\r\n          .filter((item: any) => item.type === \"gallery\" && item.url?.trim())\r\n          .map((item: any) => ({\r\n            id: item.id,\r\n            url: item.url.trim(),\r\n            position: item.position ?? 999,\r\n          }))\r\n          .sort((a: any, b: any) => a.position - b.position);\r\n\r\n        setImages(\r\n          galleryImages.length > 0\r\n            ? galleryImages\r\n            : [{ id: 0, url: DEFAULT_IMAGE, position: 1 }]\r\n        );\r\n      } catch (err: any) {\r\n        console.error(\"Error fetching images:\", err);\r\n        const message =\r\n          err.response?.data?.message ||\r\n          err.message ||\r\n          \"Failed to load product images\";\r\n        setError(message);\r\n        setImages([{ id: 0, url: DEFAULT_IMAGE, position: 1 }]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    // Only fetch if gallery is enabled\r\n    if (product_gallery) {\r\n      fetchImages();\r\n    } else {\r\n      setImages([]);\r\n      setLoading(false);\r\n    }\r\n  }, [productId, product_gallery]);\r\n\r\n  // Now safely hide the slider if product_gallery is false\r\n  if (!product_gallery) {\r\n    return null;\r\n  }\r\n\r\n  // Show loading\r\n  if (loading) {\r\n    return (\r\n      <div className=\"w-full max-w-[1200px] mx-auto aspect-square flex items-center justify-center bg-muted rounded-xl\">\r\n        <p className=\"text-muted-foreground\">Loading images...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show error\r\n  if (error) {\r\n    return (\r\n      <div className=\"w-full max-w-[1200px] mx-auto aspect-square flex items-center justify-center bg-destructive/10 rounded-xl\">\r\n        <p className=\"text-destructive\">Error: {error}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // No images fallback\r\n  if (images.length === 0) {\r\n    return null; // or show a placeholder if you want\r\n  }\r\n//max-w-[400px]\r\n  return (\r\n    <div className=\"card-header-slider\">\r\n      <Swiper\r\n        modules={[Pagination, Autoplay]}\r\n        loop={images.length > 1}\r\n        autoplay={{\r\n          delay: 3000,\r\n          disableOnInteraction: false,\r\n        }}\r\n        pagination={{ clickable: true }}\r\n        spaceBetween={20}\r\n        className=\"pb-10\"\r\n      >\r\n        {images.map((img) => (\r\n          <SwiperSlide key={img.id}>\r\n            <div className=\"relative w-full  mx-auto aspect-square\">\r\n              <img\r\n                src={img.url}\r\n                alt=\"Product gallery image\"\r\n                className=\"w-full h-full object-cover rounded-xl shadow-lg\"\r\n                loading=\"lazy\"\r\n                onError={(e) => {\r\n                  (e.target as HTMLImageElement).src = DEFAULT_IMAGE;\r\n                }}\r\n              />\r\n            </div>\r\n          </SwiperSlide>\r\n        ))}\r\n      </Swiper>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAGA;AAPA;;;;;;;;AASA,MAAM,gBACJ;AAaa,SAAS,OAAO,EAAE,SAAS,EAAE,kBAAkB,IAAI,EAAe;IAC/E,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAiB,EAAE;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,0DAA0D;IAE1D,IAAA,kNAAS,EAAC;QACR,MAAM,cAAc;YAClB,IAAI,CAAC,WAAW;gBACd,UAAU;oBAAC;wBAAE,IAAI;wBAAG,KAAK;wBAAe,UAAU;oBAAE;iBAAE;gBACtD,WAAW;gBACX;YACF;YAEA,IAAI;gBACF,WAAW;gBACX,SAAS;gBAET,MAAM,MAAM,MAAM,6HAAW,CAAC,GAAG,CAAC,mBAAmB;oBACnD,QAAQ;wBAAE,YAAY;oBAAU;gBAClC;gBAEA,IAAI,CAAC,IAAI,IAAI,EAAE,SAAS;oBACtB,MAAM,IAAI,MAAM,IAAI,IAAI,EAAE,WAAW;gBACvC;gBAEA,MAAM,gBAAgB,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE,EACvC,MAAM,CAAC,CAAC,OAAc,KAAK,IAAI,KAAK,aAAa,KAAK,GAAG,EAAE,QAC3D,GAAG,CAAC,CAAC,OAAc,CAAC;wBACnB,IAAI,KAAK,EAAE;wBACX,KAAK,KAAK,GAAG,CAAC,IAAI;wBAClB,UAAU,KAAK,QAAQ,IAAI;oBAC7B,CAAC,GACA,IAAI,CAAC,CAAC,GAAQ,IAAW,EAAE,QAAQ,GAAG,EAAE,QAAQ;gBAEnD,UACE,cAAc,MAAM,GAAG,IACnB,gBACA;oBAAC;wBAAE,IAAI;wBAAG,KAAK;wBAAe,UAAU;oBAAE;iBAAE;YAEpD,EAAE,OAAO,KAAU;gBACjB,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,MAAM,UACJ,IAAI,QAAQ,EAAE,MAAM,WACpB,IAAI,OAAO,IACX;gBACF,SAAS;gBACT,UAAU;oBAAC;wBAAE,IAAI;wBAAG,KAAK;wBAAe,UAAU;oBAAE;iBAAE;YACxD,SAAU;gBACR,WAAW;YACb;QACF;QAEA,mCAAmC;QACnC,IAAI,iBAAiB;YACnB;QACF,OAAO;YACL,UAAU,EAAE;YACZ,WAAW;QACb;IACF,GAAG;QAAC;QAAW;KAAgB;IAE/B,yDAAyD;IACzD,IAAI,CAAC,iBAAiB;QACpB,OAAO;IACT;IAEA,eAAe;IACf,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;IAG3C;IAEA,aAAa;IACb,IAAI,OAAO;QACT,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAE,WAAU;;oBAAmB;oBAAQ;;;;;;;;;;;;IAG9C;IAEA,qBAAqB;IACrB,IAAI,OAAO,MAAM,KAAK,GAAG;QACvB,OAAO,MAAM,oCAAoC;IACnD;IACF,eAAe;IACb,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,oJAAM;YACL,SAAS;gBAAC,uMAAU;gBAAE,iMAAQ;aAAC;YAC/B,MAAM,OAAO,MAAM,GAAG;YACtB,UAAU;gBACR,OAAO;gBACP,sBAAsB;YACxB;YACA,YAAY;gBAAE,WAAW;YAAK;YAC9B,cAAc;YACd,WAAU;sBAET,OAAO,GAAG,CAAC,CAAC,oBACX,8OAAC,yJAAW;8BACV,cAAA,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,KAAK,IAAI,GAAG;4BACZ,KAAI;4BACJ,WAAU;4BACV,SAAQ;4BACR,SAAS,CAAC;gCACP,EAAE,MAAM,CAAsB,GAAG,GAAG;4BACvC;;;;;;;;;;;mBATY,IAAI,EAAE;;;;;;;;;;;;;;;AAiBlC"}}]
}