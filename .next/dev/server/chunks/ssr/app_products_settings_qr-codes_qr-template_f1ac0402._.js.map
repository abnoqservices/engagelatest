{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/D/next/engage33/app/products/settings/qr-codes/qr-template/qrTemplates.ts"],"sourcesContent":["// src/components/qr/qrTemplates.ts\n\nimport type { Options } from \"qr-code-styling\";\n\nexport type QRTemplateId = \"1\" | \"2\" | \"3\" | \"4\" | \"5\" | \"6\";\n\nexport const qrTemplates: Record<QRTemplateId, Partial<Options>> = {\n  \"1\": {\n    // Classic\n    dotsOptions: { type: \"square\", color: \"#000000\" },\n    cornersSquareOptions: { type: \"square\" },\n  },\n  \"2\": {\n    // Rounded\n    dotsOptions: { type: \"rounded\", color: \"#1e40af\" },\n    cornersSquareOptions: { type: \"rounded\", color: \"#1e40af\" },\n  },\n  \"3\": {\n    // Neon\n    dotsOptions: {\n      type: \"dots\",\n      gradient: {\n        type: \"linear\",\n        rotation: 0,\n        colorStops: [\n          { offset: 0, color: \"#ec4899\" },\n          { offset: 1, color: \"#8b5cf6\" },\n        ],\n      },\n    },\n    cornersSquareOptions: {\n      type: \"dots\",\n      gradient: {\n        type: \"linear\",\n        rotation: 0,\n        colorStops: [\n          { offset: 0, color: \"#ec4899\" },\n          { offset: 1, color: \"#8b5cf6\" },\n        ],\n      },\n    },\n  },\n  \"4\": {\n    // Minimal\n    dotsOptions: { type: \"classy\", color: \"#6b7280\" },\n    cornersSquareOptions: { type: \"classy\", color: \"#6b7280\" },\n  },\n  \"5\": {\n    // Bold Red\n    dotsOptions: { type: \"extra-rounded\", color: \"#dc2626\" },\n    cornersSquareOptions: { type: \"extra-rounded\", color: \"#dc2626\" },\n  },\n  \"6\": {\n    // Elegant with logo\n    dotsOptions: { type: \"classy-rounded\", color: \"#7c3aed\" },\n    cornersDotOptions: { type: \"dot\", color: \"#7c3aed\" },\n    image: \"https://static.vecteezy.com/system/resources/previews/008/296/267/non_2x/colorful-swirl-logo-design-concept-illustration-vector.jpg\", // change or remove if no logo\n    imageOptions: {\n      hideBackgroundDots: true,\n      imageSize: 0.2,\n      margin: 6,\n      crossOrigin: \"anonymous\",\n    },\n  },\n  \n  \"7\": {\n    dotsOptions: { type: \"dots\", color: \"#ff1493\" },\n    cornersSquareOptions: { type: \"extra-rounded\", color: \"#ff1493\" },\n    backgroundOptions: { color: \"#fff0f5\" },\n  \n    image: \"https://raw.githubusercontent.com/kozakdenys/qr-code-styling/master/examples/images/heart.svg\",\n    imageOptions: {\n      hideBackgroundDots: true,\n      imageSize: 0.35,\n      margin: 8,\n      crossOrigin: \"anonymous\",\n    },\n  },\n};\n\nexport const templateNames: Record<QRTemplateId, string> = {\n  \"1\": \"Classic\",\n  \"2\": \"Rounded\",\n  \"3\": \"Neon\",\n  \"4\": \"Minimal\",\n  \"5\": \"Bold Red\",\n  \"6\": \"Elegant\",\n};"],"names":[],"mappings":"AAAA,mCAAmC;;;;;;;AAM5B,MAAM,cAAsD;IACjE,KAAK;QACH,UAAU;QACV,aAAa;YAAE,MAAM;YAAU,OAAO;QAAU;QAChD,sBAAsB;YAAE,MAAM;QAAS;IACzC;IACA,KAAK;QACH,UAAU;QACV,aAAa;YAAE,MAAM;YAAW,OAAO;QAAU;QACjD,sBAAsB;YAAE,MAAM;YAAW,OAAO;QAAU;IAC5D;IACA,KAAK;QACH,OAAO;QACP,aAAa;YACX,MAAM;YACN,UAAU;gBACR,MAAM;gBACN,UAAU;gBACV,YAAY;oBACV;wBAAE,QAAQ;wBAAG,OAAO;oBAAU;oBAC9B;wBAAE,QAAQ;wBAAG,OAAO;oBAAU;iBAC/B;YACH;QACF;QACA,sBAAsB;YACpB,MAAM;YACN,UAAU;gBACR,MAAM;gBACN,UAAU;gBACV,YAAY;oBACV;wBAAE,QAAQ;wBAAG,OAAO;oBAAU;oBAC9B;wBAAE,QAAQ;wBAAG,OAAO;oBAAU;iBAC/B;YACH;QACF;IACF;IACA,KAAK;QACH,UAAU;QACV,aAAa;YAAE,MAAM;YAAU,OAAO;QAAU;QAChD,sBAAsB;YAAE,MAAM;YAAU,OAAO;QAAU;IAC3D;IACA,KAAK;QACH,WAAW;QACX,aAAa;YAAE,MAAM;YAAiB,OAAO;QAAU;QACvD,sBAAsB;YAAE,MAAM;YAAiB,OAAO;QAAU;IAClE;IACA,KAAK;QACH,oBAAoB;QACpB,aAAa;YAAE,MAAM;YAAkB,OAAO;QAAU;QACxD,mBAAmB;YAAE,MAAM;YAAO,OAAO;QAAU;QACnD,OAAO;QACP,cAAc;YACZ,oBAAoB;YACpB,WAAW;YACX,QAAQ;YACR,aAAa;QACf;IACF;IAEA,KAAK;QACH,aAAa;YAAE,MAAM;YAAQ,OAAO;QAAU;QAC9C,sBAAsB;YAAE,MAAM;YAAiB,OAAO;QAAU;QAChE,mBAAmB;YAAE,OAAO;QAAU;QAEtC,OAAO;QACP,cAAc;YACZ,oBAAoB;YACpB,WAAW;YACX,QAAQ;YACR,aAAa;QACf;IACF;AACF;AAEO,MAAM,gBAA8C;IACzD,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;AACP"}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/D/next/engage33/app/products/settings/qr-codes/qr-template/QRPreview.tsx"],"sourcesContent":["// src/components/qr/QRPreview.tsx\n\"use client\";\n\nimport * as React from \"react\";\nimport QRCodeStyling from \"qr-code-styling\";\nimport { qrTemplates } from \"./qrTemplates\";\n\ninterface QRPreviewProps {\n  templateId: string;\n  data?: string;\n  size?: number;\n}\n\nexport function QRPreview({\n  templateId,\n  data = \"https://example.com\",\n  size = 80,\n}: QRPreviewProps) {\n  const ref = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    if (!ref.current) return;\n\n    const specific = qrTemplates[templateId as keyof typeof qrTemplates] || {};\n\n    // Critical fix: ONLY include image + imageOptions together, and ONLY if image actually exists\n    const hasImage = !!specific.image && typeof specific.image === \"string\";\n\n    const config = {\n      width: size,\n      height: size,\n      data,\n      margin: 0,\n      qrOptions: { errorCorrectionLevel: \"H\" },\n      backgroundOptions: { color: \"#ffffff\" },\n      dotsOptions: { type: \"square\", color: \"#000000\", ...specific.dotsOptions },\n      cornersSquareOptions: { type: \"square\", color: \"#000000\", ...specific.cornersSquareOptions },\n      cornersDotOptions: specific.cornersDotOptions,\n\n      // Only pass these if we really have a valid image\n      ...(hasImage && {\n        image: specific.image,\n        imageOptions: {\n          hideBackgroundDots: true,\n          imageSize: 0.2,\n          margin: 6,\n          crossOrigin: \"anonymous\",\n          // This is the secret sauce — prevents crash even if image 404s\n          onLoad: () => {}, \n        } as any,\n      }),\n    };\n\n    // Extra safety — remove any accidentally leftover undefined imageOptions\n    // @ts-ignore\n    if (!hasImage && config.imageOptions === undefined) delete config.imageOptions;\n\n    const qr = new QRCodeStyling(config as any);\n    qr.append(ref.current);\n\n    return () => {\n      qr._canvas?.remove?.();\n    };\n  }, [templateId, data, size]);\n\n  return <div ref={ref} className=\"flex justify-center\" />;\n}"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;AAGlC;AACA;AACA;AAJA;;;;;AAYO,SAAS,UAAU,EACxB,UAAU,EACV,OAAO,qBAAqB,EAC5B,OAAO,EAAE,EACM;IACf,MAAM,MAAM,+MAAY,CAAiB;IAEzC,kNAAe,CAAC;QACd,IAAI,CAAC,IAAI,OAAO,EAAE;QAElB,MAAM,WAAW,0LAAW,CAAC,WAAuC,IAAI,CAAC;QAEzE,8FAA8F;QAC9F,MAAM,WAAW,CAAC,CAAC,SAAS,KAAK,IAAI,OAAO,SAAS,KAAK,KAAK;QAE/D,MAAM,SAAS;YACb,OAAO;YACP,QAAQ;YACR;YACA,QAAQ;YACR,WAAW;gBAAE,sBAAsB;YAAI;YACvC,mBAAmB;gBAAE,OAAO;YAAU;YACtC,aAAa;gBAAE,MAAM;gBAAU,OAAO;gBAAW,GAAG,SAAS,WAAW;YAAC;YACzE,sBAAsB;gBAAE,MAAM;gBAAU,OAAO;gBAAW,GAAG,SAAS,oBAAoB;YAAC;YAC3F,mBAAmB,SAAS,iBAAiB;YAE7C,kDAAkD;YAClD,GAAI,YAAY;gBACd,OAAO,SAAS,KAAK;gBACrB,cAAc;oBACZ,oBAAoB;oBACpB,WAAW;oBACX,QAAQ;oBACR,aAAa;oBACb,+DAA+D;oBAC/D,QAAQ,KAAO;gBACjB;YACF,CAAC;QACH;QAEA,yEAAyE;QACzE,aAAa;QACb,IAAI,CAAC,YAAY,OAAO,YAAY,KAAK,WAAW,OAAO,OAAO,YAAY;QAE9E,MAAM,KAAK,IAAI,gLAAa,CAAC;QAC7B,GAAG,MAAM,CAAC,IAAI,OAAO;QAErB,OAAO;YACL,GAAG,OAAO,EAAE;QACd;IACF,GAAG;QAAC;QAAY;QAAM;KAAK;IAE3B,qBAAO,8OAAC;QAAI,KAAK;QAAK,WAAU;;;;;;AAClC"}}]
}