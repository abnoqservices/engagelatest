{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/D/next/engage333/components/tempcomponent/YouTube.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axiosClient from \"@/lib/axiosClient\";\n\ninterface YouTubeProps {\n  productId: number;\n  YouTube?: boolean;\n}\n\ninterface ProductData {\n  video_url?: string;\n}\n\nexport default function YouTube({ productId, YouTube = true }: YouTubeProps) {\n  const [videoUrl, setVideoUrl] = useState<string>(\"\");\n  const [isYouTube, setIsYouTube] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    const fetchProduct = async () => {\n      try {\n        setLoading(true);\n        const response = await axiosClient.get(`/products/${productId}`);\n\n        if (response.data.success) {\n          const url = response.data.data.video_url?.trim() || \"\";\n\n          if (url) {\n            setVideoUrl(url);\n            const isYt =\n              url.includes(\"youtube.com\") ||\n              url.includes(\"youtu.be\") ||\n              url.includes(\"youtube-nocookie.com\");\n            setIsYouTube(isYt);\n          } else {\n            setVideoUrl(\"\");\n            setIsYouTube(false);\n          }\n        }\n      } catch (err) {\n        console.error(\"Error fetching product video:\", err);\n        setVideoUrl(\"\");\n        setIsYouTube(false);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (productId) {\n      fetchProduct();\n    }\n  }, [productId]);\n\n  // Convert YouTube URL to embed URL\n  const getYouTubeEmbedUrl = (url: string): string => {\n    if (!url) return \"\";\n\n    let videoId: string | undefined;\n\n    if (url.includes(\"v=\")) {\n      videoId = url.split(\"v=\")[1]?.split(\"&\")[0]?.split(\"#\")[0];\n    } else if (url.includes(\"youtu.be/\")) {\n      videoId = url.split(\"youtu.be/\")[1]?.split(\"?\")[0]?.split(\"#\")[0];\n    } else if (url.includes(\"/embed/\")) {\n      videoId = url.split(\"/embed/\")[1]?.split(\"?\")[0];\n    } else if (url.includes(\"/shorts/\")) {\n      videoId = url.split(\"/shorts/\")[1]?.split(\"?\")[0];\n    }\n\n    return videoId ? `https://www.youtube.com/embed/${videoId}` : \"\";\n  };\n\n  const embedUrl = isYouTube ? getYouTubeEmbedUrl(videoUrl) : \"\";\n\n  // Early returns\n  if (!YouTube) return null;\n\n  if (loading) {\n    return (\n      <div className=\"w-full aspect-video flex items-center justify-center bg-gray-100 rounded-lg\">\n        <p className=\"text-gray-500\">Loading video...</p>\n      </div>\n    );\n  }\n\n  if (!videoUrl) {\n    return null; // No video at all\n  }\n\n  return (\n    <div className=\"card-header\">\n    <div className=\"w-full aspect-video relative rounded-lg overflow-hidden shadow-lg bg-black py-4\">\n      {/* YouTube Video - Only render iframe if embedUrl is valid */}\n      {isYouTube && embedUrl ? (\n        <iframe\n          src={embedUrl}\n          className=\"absolute top-0 left-0 w-full h-full\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n          allowFullScreen\n          title=\"Product Video\"\n        />\n      ) : (\n        /* Direct Video File (MP4, etc.) */\n        <video\n          className=\"absolute top-0 left-0 w-full h-full object-contain bg-black\"\n          controls\n          playsInline\n          preload=\"metadata\"\n        >\n          <source src={videoUrl} type=\"video/mp4\" />\n          <source src={videoUrl} type=\"video/webm\" />\n          <source src={videoUrl} type=\"video/ogg\" />\n          Your browser does not support the video tag.\n        </video>\n      )}\n    </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAWe,SAAS,QAAQ,EAAE,SAAS,EAAE,UAAU,IAAI,EAAgB;;IACzE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAS;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAU;IACpD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAU;IAEhD,IAAA,0KAAS;6BAAC;YACR,MAAM;kDAAe;oBACnB,IAAI;wBACF,WAAW;wBACX,MAAM,WAAW,MAAM,gIAAW,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,WAAW;wBAE/D,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;4BACzB,MAAM,MAAM,SAAS,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,UAAU;4BAEpD,IAAI,KAAK;gCACP,YAAY;gCACZ,MAAM,OACJ,IAAI,QAAQ,CAAC,kBACb,IAAI,QAAQ,CAAC,eACb,IAAI,QAAQ,CAAC;gCACf,aAAa;4BACf,OAAO;gCACL,YAAY;gCACZ,aAAa;4BACf;wBACF;oBACF,EAAE,OAAO,KAAK;wBACZ,QAAQ,KAAK,CAAC,iCAAiC;wBAC/C,YAAY;wBACZ,aAAa;oBACf,SAAU;wBACR,WAAW;oBACb;gBACF;;YAEA,IAAI,WAAW;gBACb;YACF;QACF;4BAAG;QAAC;KAAU;IAEd,mCAAmC;IACnC,MAAM,qBAAqB,CAAC;QAC1B,IAAI,CAAC,KAAK,OAAO;QAEjB,IAAI;QAEJ,IAAI,IAAI,QAAQ,CAAC,OAAO;YACtB,UAAU,IAAI,KAAK,CAAC,KAAK,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE;QAC5D,OAAO,IAAI,IAAI,QAAQ,CAAC,cAAc;YACpC,UAAU,IAAI,KAAK,CAAC,YAAY,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE;QACnE,OAAO,IAAI,IAAI,QAAQ,CAAC,YAAY;YAClC,UAAU,IAAI,KAAK,CAAC,UAAU,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE;QAClD,OAAO,IAAI,IAAI,QAAQ,CAAC,aAAa;YACnC,UAAU,IAAI,KAAK,CAAC,WAAW,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE;QACnD;QAEA,OAAO,UAAU,CAAC,8BAA8B,EAAE,SAAS,GAAG;IAChE;IAEA,MAAM,WAAW,YAAY,mBAAmB,YAAY;IAE5D,gBAAgB;IAChB,IAAI,CAAC,SAAS,OAAO;IAErB,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACb,cAAA,6LAAC;gBAAE,WAAU;0BAAgB;;;;;;;;;;;IAGnC;IAEA,IAAI,CAAC,UAAU;QACb,OAAO,MAAM,kBAAkB;IACjC;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACf,cAAA,6LAAC;YAAI,WAAU;sBAEZ,aAAa,yBACZ,6LAAC;gBACC,KAAK;gBACL,WAAU;gBACV,OAAM;gBACN,eAAe;gBACf,OAAM;;;;;uBAGR,iCAAiC,iBACjC,6LAAC;gBACC,WAAU;gBACV,QAAQ;gBACR,WAAW;gBACX,SAAQ;;kCAER,6LAAC;wBAAO,KAAK;wBAAU,MAAK;;;;;;kCAC5B,6LAAC;wBAAO,KAAK;wBAAU,MAAK;;;;;;kCAC5B,6LAAC;wBAAO,KAAK;wBAAU,MAAK;;;;;;oBAAc;;;;;;;;;;;;;;;;;AAOpD;GAzGwB;KAAA"}}]
}