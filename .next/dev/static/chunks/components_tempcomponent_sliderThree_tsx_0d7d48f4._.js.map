{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/D/next/engage333/components/tempcomponent/sliderThree.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Swiper, SwiperSlide } from \"swiper/react\";\r\nimport { Navigation, Pagination, Autoplay } from \"swiper/modules\";\r\nimport \"swiper/css\";\r\nimport \"swiper/css/navigation\";\r\nimport \"swiper/css/pagination\";\r\nimport axiosClient from \"@/lib/axiosClient\";\r\n\r\nconst DEFAULT_IMAGE =\r\n  \"https://lh3.googleusercontent.com/hzTpTV1Qwyi4crcaB_lEaRTg603ttzm_6Uw8SwBC-iQ9-PeWdFdNpejyPzFdVqWLBjf8o58sDjs8M9wV01MCyjJ3XX6GBIiUrLRiQi9ui8m0tp0\";\r\n\r\ninterface GalleryImage {\r\n  id: number;\r\n  url: string;\r\n  position: number;\r\n}\r\n\r\ninterface ProductData {\r\n  name: string;\r\n  price: number;\r\n  is_active?: boolean;\r\n}\r\n\r\ninterface SliderThreeProps {\r\n  productId: number;\r\n}\r\n\r\nexport default function SliderThree({ productId }: SliderThreeProps) {\r\n  const [images, setImages] = useState<GalleryImage[]>([]);\r\n  const [product, setProduct] = useState<ProductData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (!productId) {\r\n        setImages([{ id: 0, url: DEFAULT_IMAGE, position: 1 }]);\r\n        setProduct(null);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        // Fetch product name and price\r\n        const productRes = await axiosClient.get(`/products/${productId}`);\r\n\r\n        if (!productRes.data?.success && !productRes.data?.name) {\r\n          // Some APIs return data directly, others wrap in { success, data }\r\n          throw new Error(\"Failed to load product details\");\r\n        }\r\n\r\n        const productData = productRes.data.data || productRes.data;\r\n\r\n        setProduct({\r\n          name: productData.name || \"Untitled Product\",\r\n          price: parseFloat(productData.price) || 0,\r\n        });\r\n\r\n        // Fetch gallery images (same as original Slider)\r\n        const imagesRes = await axiosClient.get(\"/product-images\", {\r\n          params: { product_id: productId },\r\n        });\r\n\r\n        if (!imagesRes.data?.success) {\r\n          throw new Error(imagesRes.data?.message || \"API returned success: false\");\r\n        }\r\n\r\n        const galleryImages = (imagesRes.data.data || [])\r\n          .filter((item: any) => item.type === \"gallery\" && item.url?.trim())\r\n          .map((item: any) => ({\r\n            id: item.id,\r\n            url: item.url.trim(),\r\n            position: item.position ?? 999,\r\n          }))\r\n          .sort((a: GalleryImage, b: GalleryImage) => a.position - b.position);\r\n\r\n        setImages(\r\n          galleryImages.length > 0\r\n            ? galleryImages\r\n            : [{ id: 0, url: DEFAULT_IMAGE, position: 1 }]\r\n        );\r\n      } catch (err: any) {\r\n        console.error(\"Error fetching data:\", err);\r\n        const message =\r\n          err.response?.data?.message ||\r\n          err.message ||\r\n          \"Failed to load product data\";\r\n        setError(message);\r\n        setImages([{ id: 0, url: DEFAULT_IMAGE, position: 1 }]);\r\n        setProduct({ name: \"Product Unavailable\", price: 0 });\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [productId]);\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"w-full max-w-[1200px] mx-auto aspect-square flex items-center justify-center bg-muted rounded-xl\">\r\n        <p className=\"text-muted-foreground\">Loading product...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Error state\r\n  if (error) {\r\n    return (\r\n      <div className=\"w-full max-w-[1200px] mx-auto aspect-square flex items-center justify-center bg-destructive/10 rounded-xl\">\r\n        <p className=\"text-destructive\">Error: {error}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const title = product?.name || \"No Product Name\";\r\n  const subtitle = product?.price > 0 ? `$${product.price.toFixed(2)}` : \"\";\r\n\r\n  return (\r\n    <div className=\"card-header-slider\">\r\n      <Swiper\r\n        modules={[Navigation, Pagination, Autoplay]}\r\n        spaceBetween={20}\r\n        slidesPerView={1}\r\n        navigation\r\n        pagination={{ clickable: true }}\r\n        autoplay={{\r\n          delay: 2500,\r\n          disableOnInteraction: false,\r\n        }}\r\n        loop={images.length > 1}\r\n      \r\n      >\r\n        {images.map((img) => (\r\n          <SwiperSlide key={img.id}>\r\n            <div className=\"relative w-full  mx-auto aspect-square\">\r\n              <img\r\n                src={img.url}\r\n                alt={title}\r\n                className=\"w-full h-full object-cover rounded-xl shadow-lg\"\r\n                loading=\"lazy\"\r\n                onError={(e) => {\r\n                  (e.target as HTMLImageElement).src = DEFAULT_IMAGE;\r\n                }}\r\n              />\r\n\r\n              {(title || subtitle) && (\r\n                <div className=\"absolute bottom-6 left-1/2 -translate-x-1/2 text-white drop-shadow-lg text-center w-auto px-6 py-3 bg-black/50 backdrop-blur-sm rounded-xl\">\r\n                  <h2 className=\"text-sl md:text-sl font-bold leading-tight\">\r\n                    {title}\r\n                  </h2>\r\n                  {subtitle && (\r\n                    <p className=\"text-sl md:text-sl font-semibold mt-1\">\r\n                      {subtitle}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </SwiperSlide>\r\n        ))}\r\n      </Swiper>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}