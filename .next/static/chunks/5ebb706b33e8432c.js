(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var a=e.i(43476),t=e.i(47163);function s({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,t.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function r({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,t.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function i({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,t.cn)("leading-none font-semibold",e),...s})}function l({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,t.cn)("text-muted-foreground text-sm",e),...s})}function d({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,t.cn)("px-6",e),...s})}function n({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,t.cn)("flex items-center px-6 [.border-t]:pt-6",e),...s})}e.s(["Card",()=>s,"CardContent",()=>d,"CardDescription",()=>l,"CardFooter",()=>n,"CardHeader",()=>r,"CardTitle",()=>i])},56909,e=>{"use strict";let a=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>a],56909)},86446,27612,e=>{"use strict";var a=e.i(75254);let t=(0,a.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],86446);let s=(0,a.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>s],27612)},63059,e=>{"use strict";var a=e.i(46349);e.s(["ChevronRight",()=>a.default])},17521,e=>{"use strict";let a=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>a])},50216,e=>{"use strict";var a=e.i(43476),t=e.i(17521),t=t,s=e.i(47163);function r({className:e,...r}){return(0,a.jsx)(t.default,{role:"status","aria-label":"Loading",className:(0,s.cn)("size-4 animate-spin",e),...r})}e.s(["Spinner",()=>r],50216)},4199,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(74593),r=e.i(67881),i=e.i(23750),l=e.i(10708),d=e.i(62870),n=e.i(70065),c=e.i(86446),o=e.i(27612),u=e.i(56909);let h=(0,e.i(75254).default)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var m=e.i(63059),x=e.i(64659),p=e.i(50216),g=e.i(58893),f=e.i(44984);function j(){let[e,j]=t.useState([]),[v,y]=t.useState([]),[N,C]=t.useState(!0),[b,w]=t.useState(!1),[S,k]=t.useState(new Set),[T,_]=t.useState({name:"",slug:"",description:"",parent_id:null});t.useEffect(()=>{P()},[]);let P=async()=>{try{C(!0);let e=await g.default.get("/product-categories");if(e.data.success&&Array.isArray(e.data.data)){let a,t,s,r=e.data.data;j(r),y((a=new Map,t=[],r.forEach(e=>{a.set(e.id,{...e,children:[]})}),a.forEach(e=>{if(null===e.parent_id)t.push(e);else{let t=a.get(e.parent_id);t&&t.children.push(e)}}),s=e=>{e.children.sort((e,a)=>e.name.localeCompare(a.name)),e.children.forEach(s)},t.forEach(s),t))}}catch(e){(0,f.showToast)(e.response?.data?.message||"Failed to load categories","error")}finally{C(!1)}};t.useEffect(()=>{if(T.name){let e=T.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");_(a=>({...a,slug:e}))}},[T.name]);let M=async()=>{if(!T.name.trim())return(0,f.showToast)("Name is required","error");w(!0);try{await g.default.post("/product-categories",{name:T.name.trim(),slug:T.slug.trim()||void 0,description:T.description.trim()||null,parent_id:T.parent_id}),(0,f.showToast)("Saved successfully!","success"),_({name:"",slug:"",description:"",parent_id:null}),await P()}catch(e){(0,f.showToast)(e.response?.data?.message||"Save failed","error")}finally{w(!1)}},A=async e=>{if(confirm("Delete this category and all subcategories?"))try{await g.default.delete(`/product-categories/${e}`),(0,f.showToast)("Deleted","success"),await P()}catch(e){(0,f.showToast)(e.response?.data?.message||"Delete failed","error")}},H=(e,t=0)=>e.map(e=>{let s=e.children.length>0,i=S.has(e.id);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 py-2.5 px-3 hover:bg-accent/70 rounded-lg group",style:{paddingLeft:`${40*t+20}px`},children:[(0,a.jsx)("button",{onClick:a=>{var t;a.stopPropagation(),s&&(t=e.id,k(e=>{let a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a}))},className:"w-7 h-7 flex items-center justify-center text-muted-foreground",children:s?i?(0,a.jsx)(x.ChevronDown,{className:"h-4 w-4"}):(0,a.jsx)(m.ChevronRight,{className:"h-4 w-4"}):(0,a.jsx)("span",{className:"w-4"})}),(0,a.jsx)(h,{className:"h-5 w-5 text-blue-600"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(e.description||e.slug)&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description||e.slug})]}),(0,a.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)(r.Button,{size:"sm",variant:"ghost",onClick:()=>{var a,t;return a=e.id,t=e.name,void(_({name:"",slug:"",description:"",parent_id:a}),(0,f.showToast)(`Adding under: ${t}`,"info"),document.getElementById("add-form")?.scrollIntoView({behavior:"smooth"}))},children:(0,a.jsx)(c.Plus,{className:"h-4 w-4"})}),(0,a.jsx)(r.Button,{size:"icon",variant:"ghost",className:"text-destructive",onClick:()=>A(e.id),children:(0,a.jsx)(o.Trash2,{className:"h-4 w-4"})})]})]}),s&&i&&(0,a.jsx)("div",{className:"border-l-2 border-border ml-10",children:H(e.children,t+1)})]},e.id)});return(0,a.jsx)(s.DashboardLayout,{children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 py-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Product Categories"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Proper nested hierarchy"})]})}),(0,a.jsxs)(n.Card,{id:"add-form",children:[(0,a.jsx)(n.CardHeader,{children:(0,a.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Plus,{className:"h-5 w-5"}),T.parent_id?`Add Subcategory â†’ ${e.find(e=>e.id===T.parent_id)?.name||""}`:"Add New Root Category"]})}),(0,a.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(l.Label,{className:"mb-2",children:"Name *"}),(0,a.jsx)(i.Input,{value:T.name,onChange:e=>_({...T,name:e.target.value}),placeholder:"Mobile Phones & Accessories",autoFocus:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.Label,{className:"mb-2",children:"Slug (auto-generated)"}),(0,a.jsx)(i.Input,{value:T.slug,onChange:e=>_({...T,slug:e.target.value}),placeholder:""})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.Label,{className:"mb-2",children:"Description (optional)"}),(0,a.jsx)(i.Input,{value:T.description,onChange:e=>_({...T,description:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(l.Label,{children:"Parent Category"}),(0,a.jsxs)(d.Select,{value:T.parent_id?.toString()||"root",onValueChange:e=>_({...T,parent_id:"root"===e?null:Number(e)}),children:[(0,a.jsxs)(d.SelectTrigger,{children:[(0,a.jsx)(d.SelectValue,{placeholder:"Root category"})," "]}),(0,a.jsxs)(d.SelectContent,{children:[(0,a.jsx)(d.SelectItem,{value:"root",children:"Root (no parent)"}),e.map(e=>(0,a.jsx)(d.SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(r.Button,{onClick:M,disabled:b,children:[b?(0,a.jsx)(p.Spinner,{}):(0,a.jsx)(u.Save,{className:"h-4 w-4 mr-2"}),b?"Saving...":"Save"]}),T.parent_id&&(0,a.jsx)(r.Button,{variant:"outline",onClick:()=>_({...T,parent_id:null}),children:"Cancel"})]})]})]}),(0,a.jsxs)(n.Card,{children:[(0,a.jsx)(n.CardHeader,{children:(0,a.jsxs)(n.CardTitle,{children:["All Categories (",e.length,")"]})}),(0,a.jsx)(n.CardContent,{children:N?(0,a.jsx)("div",{className:"flex justify-center py-16",children:(0,a.jsx)(p.Spinner,{className:"size-8"})}):0===v.length?(0,a.jsxs)("div",{className:"text-center py-16 text-muted-foreground",children:[(0,a.jsx)(h,{className:"h-16 w-16 mx-auto mb-4 opacity-20"}),(0,a.jsx)("p",{children:"No categories yet"})]}):(0,a.jsx)("div",{className:"border rounded-lg bg-muted/30 p-4",children:H(v)})})]})]})})}e.s(["default",()=>j],4199)}]);