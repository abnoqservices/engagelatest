(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19036,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(81140),r=e.i(20783),i=e.i(30030),c=e.i(69340),n=e.i(99682),l=e.i(35804),o=e.i(48425),d="Switch",[u,h]=(0,i.createContextScope)(d),[x,m]=u(d),p=s.forwardRef((e,i)=>{let{__scopeSwitch:n,name:l,checked:d,defaultChecked:u,required:h,disabled:m,value:p="on",onCheckedChange:f,form:g,...v}=e,[y,C]=s.useState(null),S=(0,r.useComposedRefs)(i,e=>C(e)),k=s.useRef(!1),w=!y||g||!!y.closest("form"),[N=!1,T]=(0,c.useControllableState)({prop:d,defaultProp:u,onChange:f});return(0,t.jsxs)(x,{scope:n,checked:N,disabled:m,children:[(0,t.jsx)(o.Primitive.button,{type:"button",role:"switch","aria-checked":N,"aria-required":h,"data-state":j(N),"data-disabled":m?"":void 0,disabled:m,value:p,...v,ref:S,onClick:(0,a.composeEventHandlers)(e.onClick,e=>{T(e=>!e),w&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),w&&(0,t.jsx)(b,{control:y,bubbles:!k.current,name:l,value:p,checked:N,required:h,disabled:m,form:g,style:{transform:"translateX(-100%)"}})]})});p.displayName=d;var f="SwitchThumb",g=s.forwardRef((e,s)=>{let{__scopeSwitch:a,...r}=e,i=m(f,a);return(0,t.jsx)(o.Primitive.span,{"data-state":j(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:s})});g.displayName=f;var b=e=>{let{control:a,checked:r,bubbles:i=!0,...c}=e,o=s.useRef(null),d=(0,n.usePrevious)(r),u=(0,l.useSize)(a);return s.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==r&&t){let s=new Event("click",{bubbles:i});t.call(e,r),e.dispatchEvent(s)}},[d,r,i]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...c,tabIndex:-1,ref:o,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function j(e){return e?"checked":"unchecked"}var v=e.i(47163);function y({className:e,...s}){return(0,t.jsx)(p,{"data-slot":"switch",className:(0,v.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:(0,t.jsx)(g,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}e.s(["Switch",()=>y],19036)},50570,e=>{"use strict";let t=(0,e.i(75254).default)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);e.s(["GripVertical",()=>t],50570)},37213,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(70703),r=e.i(74593),i=e.i(70065),c=e.i(19036),n=e.i(50570),l=e.i(95468),o=e.i(37727),d=e.i(31278),u=e.i(18566),h=e.i(58893),x=e.i(77183),m=e.i(76590),p=e.i(7311),f=e.i(62870),g=e.i(67881);let b=(0,a.default)(()=>e.A(38937),{loadableGenerated:{modules:[5505]},ssr:!1}),j=({message:e,type:a="success",onClose:r})=>(s.useEffect(()=>{let e=setTimeout(r,4e3);return()=>clearTimeout(e)},[r]),(0,t.jsxs)("div",{className:`fixed bottom-8 left-1/2 -translate-x-1/2 z-50 px-6 py-4 rounded-lg shadow-2xl text-white font-medium flex items-center gap-3 ${"success"===a?"bg-green-600":"bg-red-600"}`,style:{animation:"slideUp 0.3s ease-out"},children:["success"===a?(0,t.jsx)(l.CheckCircle2,{className:"h-5 w-5"}):(0,t.jsx)(o.X,{className:"h-5 w-5"}),e]}));function v({item:e,availableSections:a,onToggle:r,onRemove:i}){let{attributes:l,listeners:o,setNodeRef:d,transform:u,transition:h}=(0,m.useSortable)({id:e.section}),[x,f]=s.useState(!1);s.useEffect(()=>f(!0),[]);let b={transform:x&&u?p.CSS.Transform.toString(u):void 0,transition:x?h:void 0};return(0,t.jsxs)("div",{ref:d,style:b,className:"flex items-center justify-between rounded-lg border p-4 bg-white shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n.GripVertical,{className:"h-5 w-5 cursor-grab",...l,...o}),(0,t.jsx)("span",{className:"font-medium",children:a.find(t=>t.section===e.section)?.label||e.section})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(c.Switch,{checked:e.enabled,onCheckedChange:()=>r(e.section)}),(0,t.jsx)(g.Button,{size:"sm",variant:"ghost",onClick:()=>i(e.section),className:"cursor-pointer",children:"Remove"})]})]})}function y({templateId:e,userId:a}){let c=(0,u.useParams)();c?.id;let[n,l]=s.useState(""),[o,p]=s.useState(!1),[y,C]=s.useState(!0),[S,k]=s.useState(null),[w,N]=s.useState([]),[T,P]=s.useState([]),[D,E]=s.useState({primaryColor:"#ecedf4ff",backgroundColor:"#000000",textColor:"#a97d38",headlineSize:28,paragraphSize:16}),R=(e,t="success")=>{k({message:e,type:t})},z=(0,x.useSensors)((0,x.useSensor)(x.PointerSensor,{activationConstraint:{distance:6}}));s.useEffect(()=>{(async()=>{if(!e||!a){R("Missing template ID or user ID","error"),C(!1);return}try{C(!0);let t=await h.default.post("/templates/sections",{templateId:e,userId:a});if("success"===t.data.status){let{availableSections:e,activeSections:s,styles:a}=t.data.data;if(N(e||[]),s&&s.length>0)P(s);else{let e=["Header","Description","sliderThree","Specification","CTA","Social","Contact"],t=sections.filter(t=>e.includes(t.section)).map(e=>({section:e.section,enabled:!0,fields:e.fields}));P(t)}}else R(t.data.message||"Failed to load sections","error")}catch(e){console.error("Fetch sections error:",e),R(e.response?.data?.message||"Failed to load sections","error")}finally{C(!1)}})()},[e,a]);let I=e=>P(t=>t.map(t=>t.section===e?{...t,enabled:!t.enabled}:t)),A=e=>P(t=>t.filter(t=>t.section!==e)),F=async()=>{if(!e||!a)return void R("Missing template ID or user ID","error");p(!0);try{let t=await h.default.post("/templates/templateupdate/",{templateId:e,userId:a,sections:T,styles:D});"success"===t.data.status?R("Template saved successfully!","success"):R(t.data.message||"Failed to save template","error")}catch(e){console.error("Save error:",e),R(e.response?.data?.message||"Failed to save template","error")}finally{p(!1)}},H=w.filter(e=>!T.some(t=>t.section===e.section));return y?(0,t.jsx)(r.DashboardLayout,{children:(0,t.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)(d.Loader2,{className:"h-12 w-12 animate-spin mx-auto text-primary"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground",children:"Loading sections..."})]})})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold"}),(0,t.jsx)(g.Button,{onClick:F,disabled:o,size:"lg",className:"cursor-pointer",children:o?"Saving...":"Save & Publish"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Add Sections"}),(0,t.jsx)(i.CardDescription,{children:"Select a section to add"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsxs)(f.Select,{value:n,onValueChange:e=>{(e=>{if(T.some(t=>t.section===e))return;let t=w.find(t=>t.section===e);t&&P(e=>[...e,{section:t.section,enabled:!0,fields:t.fields}])})(e),l("")},children:[(0,t.jsx)(f.SelectTrigger,{children:(0,t.jsx)(f.SelectValue,{placeholder:"Select Component of section..."})}),(0,t.jsx)(f.SelectContent,{children:H.length>0?H.map(e=>(0,t.jsx)(f.SelectItem,{value:e.section,children:e.label},e.section)):(0,t.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"All sections added"})})]})})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Page Sections"}),(0,t.jsx)(i.CardDescription,{children:"Reorder sections"})]}),(0,t.jsx)(i.CardContent,{children:T.length>0?(0,t.jsx)(x.DndContext,{sensors:z,collisionDetection:x.closestCenter,onDragEnd:({active:e,over:t})=>{t&&e.id!==t.id&&P(s=>{let a=s.findIndex(t=>t.section===e.id),r=s.findIndex(e=>e.section===t.id);return(0,m.arrayMove)(s,a,r)})},children:(0,t.jsx)(m.SortableContext,{items:T.map(e=>e.section),strategy:m.verticalListSortingStrategy,children:(0,t.jsx)("div",{className:"space-y-3",children:T.map(e=>(0,t.jsx)(v,{item:e,availableSections:w,onToggle:I,onRemove:A},e.section))})})}):(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No sections added. Select a section from the dropdown above."})})]})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{children:"Mobile Preview"})}),(0,t.jsx)(i.CardContent,{className:"flex justify-center py-8",children:(0,t.jsxs)("div",{className:"w-[360px] h-[720px] rounded-[45px] border-[14px] border-black bg-black overflow-hidden relative shadow-xl",children:[(0,t.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-40 h-6 bg-black rounded-b-3xl z-20"}),(0,t.jsx)("div",{className:"bg-white w-full h-full overflow-y-auto",children:(0,t.jsx)(b,{data:{templateName:"modern",sections:T,styles:D}})})]})})]})]}),S&&(0,t.jsx)(j,{message:S.message,type:S.type,onClose:()=>k(null)})]})})}e.s(["default",()=>y])},51396,e=>{e.n(e.i(37213))},38937,e=>{e.v(t=>Promise.all(["static/chunks/e60c232433f2a796.js"].map(t=>e.l(t))).then(()=>t(5505)))}]);