(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(43476),s=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function r({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...a})}function c({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>n,"CardDescription",()=>c,"CardFooter",()=>l,"CardHeader",()=>r,"CardTitle",()=>i])},19036,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(81140),r=e.i(20783),i=e.i(30030),c=e.i(69340),n=e.i(99682),l=e.i(35804),o=e.i(48425),d="Switch",[u,x]=(0,i.createContextScope)(d),[m,h]=u(d),f=s.forwardRef((e,i)=>{let{__scopeSwitch:n,name:l,checked:d,defaultChecked:u,required:x,disabled:h,value:f="on",onCheckedChange:p,form:g,...v}=e,[y,C]=s.useState(null),k=(0,r.useComposedRefs)(i,e=>C(e)),S=s.useRef(!1),w=!y||g||!!y.closest("form"),[N=!1,T]=(0,c.useControllableState)({prop:d,defaultProp:u,onChange:p});return(0,t.jsxs)(m,{scope:n,checked:N,disabled:h,children:[(0,t.jsx)(o.Primitive.button,{type:"button",role:"switch","aria-checked":N,"aria-required":x,"data-state":j(N),"data-disabled":h?"":void 0,disabled:h,value:f,...v,ref:k,onClick:(0,a.composeEventHandlers)(e.onClick,e=>{T(e=>!e),w&&(S.current=e.isPropagationStopped(),S.current||e.stopPropagation())})}),w&&(0,t.jsx)(b,{control:y,bubbles:!S.current,name:l,value:f,checked:N,required:x,disabled:h,form:g,style:{transform:"translateX(-100%)"}})]})});f.displayName=d;var p="SwitchThumb",g=s.forwardRef((e,s)=>{let{__scopeSwitch:a,...r}=e,i=h(p,a);return(0,t.jsx)(o.Primitive.span,{"data-state":j(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:s})});g.displayName=p;var b=e=>{let{control:a,checked:r,bubbles:i=!0,...c}=e,o=s.useRef(null),d=(0,n.usePrevious)(r),u=(0,l.useSize)(a);return s.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==r&&t){let s=new Event("click",{bubbles:i});t.call(e,r),e.dispatchEvent(s)}},[d,r,i]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...c,tabIndex:-1,ref:o,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function j(e){return e?"checked":"unchecked"}var v=e.i(47163);function y({className:e,...s}){return(0,t.jsx)(f,{"data-slot":"switch",className:(0,v.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:(0,t.jsx)(g,{"data-slot":"switch-thumb",className:"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"})})}e.s(["Switch",()=>y],19036)},50570,e=>{"use strict";let t=(0,e.i(75254).default)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);e.s(["GripVertical",()=>t],50570)},17521,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["default",()=>t])},95468,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],95468)},31278,e=>{"use strict";var t=e.i(17521);e.s(["Loader2",()=>t.default])},37213,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(70703),r=e.i(74593),i=e.i(70065),c=e.i(19036),n=e.i(50570),l=e.i(95468),o=e.i(37727),d=e.i(31278),u=e.i(18566),x=e.i(58893),m=e.i(77183),h=e.i(76590),f=e.i(7311),p=e.i(62870),g=e.i(67881);let b=(0,a.default)(()=>e.A(38937),{loadableGenerated:{modules:[5505]},ssr:!1}),j=({message:e,type:a="success",onClose:r})=>(s.useEffect(()=>{let e=setTimeout(r,4e3);return()=>clearTimeout(e)},[r]),(0,t.jsxs)("div",{className:`fixed bottom-8 left-1/2 -translate-x-1/2 z-50 px-6 py-4 rounded-lg shadow-2xl text-white font-medium flex items-center gap-3 ${"success"===a?"bg-green-600":"bg-red-600"}`,style:{animation:"slideUp 0.3s ease-out"},children:["success"===a?(0,t.jsx)(l.CheckCircle2,{className:"h-5 w-5"}):(0,t.jsx)(o.X,{className:"h-5 w-5"}),e]}));function v({item:e,availableSections:a,onToggle:r,onRemove:i}){let{attributes:l,listeners:o,setNodeRef:d,transform:u,transition:x}=(0,h.useSortable)({id:e.section}),[m,p]=s.useState(!1);s.useEffect(()=>p(!0),[]);let b={transform:m&&u?f.CSS.Transform.toString(u):void 0,transition:m?x:void 0};return(0,t.jsxs)("div",{ref:d,style:b,className:"flex items-center justify-between rounded-lg border p-4 bg-white shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(n.GripVertical,{className:"h-5 w-5 cursor-grab",...l,...o}),(0,t.jsx)("span",{className:"font-medium",children:a.find(t=>t.section===e.section)?.label||e.section})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(c.Switch,{checked:e.enabled,onCheckedChange:()=>r(e.section)}),(0,t.jsx)(g.Button,{size:"sm",variant:"ghost",onClick:()=>i(e.section),className:"cursor-pointer",children:"Remove"})]})]})}function y({templateId:e,userId:a}){let c=(0,u.useParams)();c?.id;let[n,l]=s.useState(""),[o,f]=s.useState(!1),[y,C]=s.useState(!0),[k,S]=s.useState(null),[w,N]=s.useState([]),[T,P]=s.useState([]),[D,z]=s.useState({primaryColor:"#ecedf4ff",backgroundColor:"#000000",textColor:"#a97d38",headlineSize:28,paragraphSize:16}),E=(e,t="success")=>{S({message:e,type:t})},R=(0,m.useSensors)((0,m.useSensor)(m.PointerSensor,{activationConstraint:{distance:6}}));s.useEffect(()=>{(async()=>{if(!e||!a){E("Missing template ID or user ID","error"),C(!1);return}try{C(!0);let t=await x.default.post("/templates/sections",{templateId:e,userId:a});if("success"===t.data.status){let{availableSections:e,activeSections:s,styles:a}=t.data.data;if(N(e||[]),s&&s.length>0)P(s);else{let e=["Header","Description","sliderThree","Specification","CTA","Social","Contact"],t=sections.filter(t=>e.includes(t.section)).map(e=>({section:e.section,enabled:!0,fields:e.fields}));P(t)}}else E(t.data.message||"Failed to load sections","error")}catch(e){console.error("Fetch sections error:",e),E(e.response?.data?.message||"Failed to load sections","error")}finally{C(!1)}})()},[e,a]);let I=e=>P(t=>t.map(t=>t.section===e?{...t,enabled:!t.enabled}:t)),F=e=>P(t=>t.filter(t=>t.section!==e)),H=async()=>{if(!e||!a)return void E("Missing template ID or user ID","error");f(!0);try{let t=await x.default.post("/templates/templateupdate/",{templateId:e,userId:a,sections:T,styles:D});"success"===t.data.status?E("Template saved successfully!","success"):E(t.data.message||"Failed to save template","error")}catch(e){console.error("Save error:",e),E(e.response?.data?.message||"Failed to save template","error")}finally{f(!1)}},L=w.filter(e=>!T.some(t=>t.section===e.section));return y?(0,t.jsx)(r.DashboardLayout,{children:(0,t.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)(d.Loader2,{className:"h-12 w-12 animate-spin mx-auto text-primary"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground",children:"Loading sections..."})]})})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold"}),(0,t.jsx)(g.Button,{onClick:H,disabled:o,size:"lg",className:"cursor-pointer",children:o?"Saving...":"Save & Publish"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Add Sections"}),(0,t.jsx)(i.CardDescription,{children:"Select a section to add"})]}),(0,t.jsx)(i.CardContent,{children:(0,t.jsxs)(p.Select,{value:n,onValueChange:e=>{(e=>{if(T.some(t=>t.section===e))return;let t=w.find(t=>t.section===e);t&&P(e=>[...e,{section:t.section,enabled:!0,fields:t.fields}])})(e),l("")},children:[(0,t.jsx)(p.SelectTrigger,{children:(0,t.jsx)(p.SelectValue,{placeholder:"Select Component of section..."})}),(0,t.jsx)(p.SelectContent,{children:L.length>0?L.map(e=>(0,t.jsx)(p.SelectItem,{value:e.section,children:e.label},e.section)):(0,t.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"All sections added"})})]})})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsxs)(i.CardHeader,{children:[(0,t.jsx)(i.CardTitle,{children:"Page Sections"}),(0,t.jsx)(i.CardDescription,{children:"Reorder sections"})]}),(0,t.jsx)(i.CardContent,{children:T.length>0?(0,t.jsx)(m.DndContext,{sensors:R,collisionDetection:m.closestCenter,onDragEnd:({active:e,over:t})=>{t&&e.id!==t.id&&P(s=>{let a=s.findIndex(t=>t.section===e.id),r=s.findIndex(e=>e.section===t.id);return(0,h.arrayMove)(s,a,r)})},children:(0,t.jsx)(h.SortableContext,{items:T.map(e=>e.section),strategy:h.verticalListSortingStrategy,children:(0,t.jsx)("div",{className:"space-y-3",children:T.map(e=>(0,t.jsx)(v,{item:e,availableSections:w,onToggle:I,onRemove:F},e.section))})})}):(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No sections added. Select a section from the dropdown above."})})]})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{children:"Mobile Preview"})}),(0,t.jsx)(i.CardContent,{className:"flex justify-center py-8",children:(0,t.jsxs)("div",{className:"w-[360px] h-[720px] rounded-[45px] border-[14px] border-black bg-black overflow-hidden relative shadow-xl",children:[(0,t.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-40 h-6 bg-black rounded-b-3xl z-20"}),(0,t.jsx)("div",{className:"bg-white w-full h-full overflow-y-auto",children:(0,t.jsx)(b,{data:{templateName:"modern",sections:T,styles:D}})})]})})]})]}),k&&(0,t.jsx)(j,{message:k.message,type:k.type,onClose:()=>S(null)})]})})}e.s(["default",()=>y])},51396,e=>{e.n(e.i(37213))},38937,e=>{e.v(t=>Promise.all(["static/chunks/e60c232433f2a796.js"].map(t=>e.l(t))).then(()=>t(5505)))}]);